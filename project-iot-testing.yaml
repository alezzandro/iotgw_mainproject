apiVersion: v1
kind: Template
metadata:
  creationTimestamp: null
  name: iot-testing
objects:
- apiVersion: v1
  kind: DeploymentConfig
  metadata:
    creationTimestamp: null
    generation: 1
    labels:
      app: amq63-persistent
      application: broker
      template: amq63-persistent
      xpaas: 1.4.8
    name: broker-amq
  spec:
    replicas: 1
    selector:
      deploymentConfig: broker-amq
    strategy:
      activeDeadlineSeconds: 21600
      resources: {}
      rollingParams:
        intervalSeconds: 1
        maxSurge: 0
        maxUnavailable: 25%
        timeoutSeconds: 600
        updatePeriodSeconds: 1
      type: Rolling
    template:
      metadata:
        creationTimestamp: null
        labels:
          application: broker
          deploymentConfig: broker-amq
        name: broker-amq
      spec:
        containers:
        - env:
          - name: AMQ_USER
            value: admin
          - name: AMQ_PASSWORD
            value: change12_me
          - name: AMQ_TRANSPORTS
            value: openwire, mqtt
          - name: AMQ_QUEUES
            value: message.to.rules, message.to.datacenter
          - name: AMQ_TOPICS
          - name: MQ_SERIALIZABLE_PACKAGES
          - name: AMQ_SPLIT
            value: "true"
          - name: AMQ_MESH_DISCOVERY_TYPE
            value: dns
          - name: AMQ_MESH_SERVICE_NAME
            value: broker-amq-mesh
          - name: AMQ_MESH_SERVICE_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: AMQ_STORAGE_USAGE_LIMIT
            value: 1 gb
          - name: AMQ_QUEUE_MEMORY_LIMIT
          image: registry.access.redhat.com/jboss-amq-6/amq63-openshift@sha256:921ba8088efd41bd9c591c7ba45ef7d67dca603a5632e5a5ea4a9c2af67617db
          imagePullPolicy: Always
          name: broker-amq
          ports:
          - containerPort: 8778
            name: jolokia
            protocol: TCP
          - containerPort: 5672
            name: amqp
            protocol: TCP
          - containerPort: 1883
            name: mqtt
            protocol: TCP
          - containerPort: 61613
            name: stomp
            protocol: TCP
          - containerPort: 61616
            name: tcp
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - /bin/bash
              - -c
              - /opt/amq/bin/readinessProbe.sh
            failureThreshold: 3
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /opt/amq/data
            name: broker-amq-pvol
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 60
        volumes:
        - emptyDir: {}
          name: broker-amq-pvol
    test: false
    triggers:
    - imageChangeParams:
        automatic: true
        containerNames:
        - broker-amq
        from:
          kind: ImageStreamTag
          name: jboss-amq-63:1.3
          namespace: openshift
      type: ImageChange
    - type: ConfigChange
  status:
    availableReplicas: 0
    latestVersion: 0
    observedGeneration: 0
    replicas: 0
    unavailableReplicas: 0
    updatedReplicas: 0
- apiVersion: v1
  kind: DeploymentConfig
  metadata:
    creationTimestamp: null
    generation: 1
    labels:
      app: amq63-persistent
      application: broker
      template: amq63-persistent
      xpaas: 1.4.8
    name: broker-drainer
  spec:
    replicas: 1
    selector:
      deploymentConfig: broker-drainer
    strategy:
      activeDeadlineSeconds: 21600
      recreateParams:
        timeoutSeconds: 600
      resources: {}
      type: Recreate
    template:
      metadata:
        creationTimestamp: null
        labels:
          application: broker
          deploymentConfig: broker-drainer
        name: broker-drainer
      spec:
        containers:
        - command:
          - /opt/amq/bin/drain.sh
          env:
          - name: AMQ_USER
            value: admin
          - name: AMQ_PASSWORD
            value: change12_me
          - name: AMQ_MESH_SERVICE_NAME
            value: broker-amq-mesh
          - name: AMQ_MESH_SERVICE_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          image: registry.access.redhat.com/jboss-amq-6/amq63-openshift@sha256:921ba8088efd41bd9c591c7ba45ef7d67dca603a5632e5a5ea4a9c2af67617db
          imagePullPolicy: Always
          name: broker-drainer
          ports:
          - containerPort: 8778
            name: jolokia
            protocol: TCP
          - containerPort: 61616
            name: tcp
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /opt/amq/data
            name: broker-amq-pvol
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 60
        volumes:
        - emptyDir: {}
          name: broker-amq-pvol
    test: false
    triggers:
    - imageChangeParams:
        automatic: true
        containerNames:
        - broker-drainer
        from:
          kind: ImageStreamTag
          name: jboss-amq-63:1.3
          namespace: openshift
      type: ImageChange
    - type: ConfigChange
  status:
    availableReplicas: 0
    latestVersion: 0
    observedGeneration: 0
    replicas: 0
    unavailableReplicas: 0
    updatedReplicas: 0
- apiVersion: v1
  kind: DeploymentConfig
  metadata:
    annotations:
      openshift.io/generated-by: OpenShiftWebConsole
    creationTimestamp: null
    generation: 1
    labels:
      app: businessrules
    name: businessrules
  spec:
    replicas: 1
    selector:
      deploymentconfig: businessrules
    strategy:
      activeDeadlineSeconds: 21600
      resources: {}
      rollingParams:
        intervalSeconds: 1
        maxSurge: 25%
        maxUnavailable: 25%
        timeoutSeconds: 600
        updatePeriodSeconds: 1
      type: Rolling
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: businessrules
          deploymentconfig: businessrules
      spec:
        containers:
        - env:
          - name: JAVA_APP_JAR
            value: rules-jar-with-dependencies.jar
          - name: SOURCE_AMQ_BROKER
            value: tcp://broker-amq-mesh:61616
          - name: SOURCE_QUEUE
            value: message.to.rules
          - name: SOURCE_BROKER_ADMIN_UID
            value: admin
          - name: SOURCE_BROKER_ADMIN_PASSWD
            value: change12_me
          - name: TARGET_AMQ_BROKER
            value: tcp://broker-amq-mesh:61616
          - name: TARGET_QUEUE
            value: message.to.datacenter
          - name: TARGET_BROKER_ADMIN_UID
            value: admin
          - name: TARGET_BROKER_ADMIN_PASSWD
            value: change12_me
          image: 172.30.1.1:5000/iot-development/businessrules@sha256:96c3d3b5481b28093127353a36104451ded3f57702a0e969f121c1f2dd4bbcb8
          imagePullPolicy: Always
          name: businessrules
          ports:
          - containerPort: 8080
            protocol: TCP
          - containerPort: 8443
            protocol: TCP
          - containerPort: 8778
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
    test: false
    triggers:
    - imageChangeParams:
        containerNames:
        - businessrules
        from:
          kind: ImageStreamTag
          name: businessrules:latest
          namespace: iot-development
      type: ImageChange
    - type: ConfigChange
  status:
    availableReplicas: 0
    latestVersion: 0
    observedGeneration: 0
    replicas: 0
    unavailableReplicas: 0
    updatedReplicas: 0
- apiVersion: v1
  kind: DeploymentConfig
  metadata:
    annotations:
      template.alpha.openshift.io/wait-for-ready: "true"
    creationTimestamp: null
    generation: 1
    labels:
      app: jenkins-persistent
      template: jenkins-persistent-template
    name: jenkins
  spec:
    replicas: 1
    selector:
      name: jenkins
    strategy:
      activeDeadlineSeconds: 21600
      recreateParams:
        timeoutSeconds: 600
      resources: {}
      type: Recreate
    template:
      metadata:
        creationTimestamp: null
        labels:
          name: jenkins
      spec:
        containers:
        - env:
          - name: OPENSHIFT_ENABLE_OAUTH
            value: "true"
          - name: OPENSHIFT_ENABLE_REDIRECT_PROMPT
            value: "true"
          - name: KUBERNETES_MASTER
            value: https://kubernetes.default:443
          - name: KUBERNETES_TRUST_CERTIFICATES
            value: "true"
          - name: JENKINS_SERVICE_NAME
            value: jenkins
          - name: JNLP_SERVICE_NAME
            value: jenkins-jnlp
          image: registry.access.redhat.com/openshift3/jenkins-2-rhel7@sha256:9d9fd30f8cdf87c89b96e01e8b17786cd0643929b0621b719ab6b1353c8a5722
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 2
            httpGet:
              path: /login
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 420
            periodSeconds: 360
            successThreshold: 1
            timeoutSeconds: 240
          name: jenkins
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /login
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 3
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 240
          resources:
            limits:
              memory: 512Mi
          securityContext:
            capabilities: {}
            privileged: false
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/lib/jenkins
            name: jenkins-data
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: jenkins
        serviceAccountName: jenkins
        terminationGracePeriodSeconds: 30
        volumes:
        - name: jenkins-data
          persistentVolumeClaim:
            claimName: jenkins
    test: false
    triggers:
    - imageChangeParams:
        automatic: true
        containerNames:
        - jenkins
        from:
          kind: ImageStreamTag
          name: jenkins:2
          namespace: openshift
      type: ImageChange
    - type: ConfigChange
  status:
    availableReplicas: 0
    latestVersion: 0
    observedGeneration: 0
    replicas: 0
    unavailableReplicas: 0
    updatedReplicas: 0
- apiVersion: v1
  kind: DeploymentConfig
  metadata:
    annotations:
      openshift.io/generated-by: OpenShiftWebConsole
    creationTimestamp: null
    generation: 1
    labels:
      app: routingservice
    name: routingservice
  spec:
    replicas: 1
    selector:
      deploymentconfig: routingservice
    strategy:
      activeDeadlineSeconds: 21600
      resources: {}
      rollingParams:
        intervalSeconds: 1
        maxSurge: 25%
        maxUnavailable: 25%
        timeoutSeconds: 600
        updatePeriodSeconds: 1
      type: Rolling
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: routingservice
          deploymentconfig: routingservice
      spec:
        containers:
        - env:
          - name: SOURCE_AMQ_BROKER
            value: tcp://broker-amq-mesh:61616
          - name: SOURCE_BROKER_ADMIN_UID
            value: admin
          - name: SOURCE_BROKER_ADMIN_PASSWD
            value: change12_me
          - name: BROKER_AMQ_MQTT_HOST
            value: broker-amq-mqtt
          image: 172.30.1.1:5000/iot-development/routingservice@sha256:a0ad043afb73edf7ee7cd1801ddae7a202eac6a36e0ed0847ecd7d9d859097c5
          imagePullPolicy: Always
          name: routingservice
          ports:
          - containerPort: 8778
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
    test: false
    triggers:
    - imageChangeParams:
        containerNames:
        - routingservice
        from:
          kind: ImageStreamTag
          name: routingservice:latest
          namespace: iot-development
      type: ImageChange
    - type: ConfigChange
  status:
    availableReplicas: 0
    latestVersion: 0
    observedGeneration: 0
    replicas: 0
    unavailableReplicas: 0
    updatedReplicas: 0
- apiVersion: v1
  kind: DeploymentConfig
  metadata:
    annotations:
      openshift.io/generated-by: OpenShiftWebConsole
    creationTimestamp: null
    generation: 1
    labels:
      app: software-sensor
    name: software-sensor
  spec:
    replicas: 1
    selector:
      deploymentconfig: software-sensor
    strategy:
      activeDeadlineSeconds: 21600
      resources: {}
      rollingParams:
        intervalSeconds: 1
        maxSurge: 25%
        maxUnavailable: 25%
        timeoutSeconds: 600
        updatePeriodSeconds: 1
      type: Rolling
    template:
      metadata:
        creationTimestamp: null
        labels:
          app: software-sensor
          deploymentconfig: software-sensor
      spec:
        containers:
        - env:
          - name: deviceType
            value: temperature
          - name: deviceID
            value: "4711"
          - name: initialValue
            value: "70"
          - name: count
            value: "1000"
          - name: waitTime
            value: "1"
          - name: receiverURL
            value: broker-amq-mqtt
          - name: brokerUID
            value: admin
          - name: brokerPassword
            value: change12_me
          - name: highWater
            value: "800"
          - name: lowWater
            value: "200"
          - name: JAVA_OPTIONS
            value: -DhighWater=800 -DlowWater=200 -DbrokerUID=admin -DbrokerPassword=change12_me
              -DreceiverURL=broker-amq-mqtt -DdeviceType=temperature -DdeviceID=4711
              -DinitialValue=70 -Dcount=1000 -DwaitTime=1
          - name: JAVA_APP_JAR
            value: softwareSensor-jar-with-dependencies.jar
          image: 172.30.1.1:5000/iot-development/software-sensor@sha256:5cae52a43658e6a18d0e90a76e8c31f8fa63e95d542326b1d5838fa99aaa04a2
          imagePullPolicy: Always
          name: software-sensor
          ports:
          - containerPort: 8080
            protocol: TCP
          - containerPort: 8443
            protocol: TCP
          - containerPort: 8778
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
    test: false
    triggers:
    - imageChangeParams:
        containerNames:
        - software-sensor
        from:
          kind: ImageStreamTag
          name: software-sensor:latest
          namespace: iot-development
      type: ImageChange
    - type: ConfigChange
  status:
    availableReplicas: 0
    latestVersion: 0
    observedGeneration: 0
    replicas: 0
    unavailableReplicas: 0
    updatedReplicas: 0
- apiVersion: v1
  kind: BuildConfig
  metadata:
    annotations:
      openshift.io/generated-by: OpenShiftWebConsole
    creationTimestamp: null
    labels:
      app: businessrules
    name: businessrules
  spec:
    nodeSelector: null
    output:
      to:
        kind: ImageStreamTag
        name: businessrules:latest
    postCommit: {}
    resources: {}
    runPolicy: Serial
    source:
      git:
        ref: master
        uri: https://github.com/alezzandro/iotgw_BusinessRules_Service
      type: Git
    strategy:
      sourceStrategy:
        from:
          kind: ImageStreamTag
          name: redhat-openjdk18-openshift:1.2
          namespace: openshift
      type: Source
    triggers:
    - imageChange: {}
      type: ImageChange
    - type: ConfigChange
    - generic:
        secret: 7ad3b0e9099d2600
      type: Generic
    - github:
        secret: db7e9a6824baabe7
      type: GitHub
  status:
    lastVersion: 0
- apiVersion: v1
  kind: BuildConfig
  metadata:
    creationTimestamp: null
    name: businessrules-pipeline
  spec:
    nodeSelector: {}
    output: {}
    postCommit: {}
    resources: {}
    runPolicy: Serial
    source:
      type: None
    strategy:
      jenkinsPipelineStrategy:
        jenkinsfile: |-
          // name of the resource that will be used
          def templateName = 'businessrules'
          // name of testing project
          def testingProject = 'iot-testing'
          // NOTE, the "pipeline" directive/closure from the declarative pipeline syntax needs to include, or be nested outside,
          // and "openshift" directive/closure from the OpenShift Client Plugin for Jenkins.  Otherwise, the declarative pipeline engine
          // will not be fully engaged.
          pipeline {
              agent {
                node {
                  // spin up a maven slave pod to run this build on
                  label 'maven'
                }
              }
              options {
                  // set a timeout of 20 minutes for this pipeline
                  timeout(time: 20, unit: 'MINUTES')
              }

              stages {
                  stage('preamble') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Using project: ${openshift.project()}"
                                  }
                              }
                          }
                      }
                  }
                  stage('build') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def builds = openshift.selector("bc", templateName).related('builds')
                                      builds.untilEach(1) {
                                          return (it.object().status.phase == "Complete")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('test') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Just an empty test!"
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('deploy') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def rm = openshift.selector("dc", templateName).rollout()
                                      openshift.selector("dc", templateName).related('pods').untilEach(1) {
                                          return (it.object().status.phase == "Running")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('tag') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      // if everything else succeeded, tag the ${templateName}:latest image as ${testingProject}/${templateName}:latest
                                      openshift.tag("${openshift.project()}/${templateName}:latest", "${testingProject}/${templateName}:latest")
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
              } // stages
          } // pipeline
      type: JenkinsPipeline
    triggers: []
  status:
    lastVersion: 0
- apiVersion: v1
  kind: BuildConfig
  metadata:
    annotations:
      openshift.io/generated-by: OpenShiftWebConsole
    creationTimestamp: null
    labels:
      app: routingservice
    name: routingservice
  spec:
    nodeSelector: null
    output:
      to:
        kind: ImageStreamTag
        name: routingservice:latest
    postCommit: {}
    resources: {}
    runPolicy: Serial
    source:
      git:
        ref: master
        uri: https://github.com/alezzandro/iotgw_Routing_Service
      type: Git
    strategy:
      sourceStrategy:
        from:
          kind: ImageStreamTag
          name: fis-karaf-openshift:2.0
          namespace: openshift
      type: Source
    triggers:
    - imageChange: {}
      type: ImageChange
    - type: ConfigChange
    - generic:
        secret: 8c07cb5318548d71
      type: Generic
    - github:
        secret: 8177001173e5a904
      type: GitHub
  status:
    lastVersion: 0
- apiVersion: v1
  kind: BuildConfig
  metadata:
    creationTimestamp: null
    name: routingservice-pipeline
  spec:
    nodeSelector: {}
    output: {}
    postCommit: {}
    resources: {}
    runPolicy: Serial
    source:
      type: None
    strategy:
      jenkinsPipelineStrategy:
        jenkinsfile: |-
          // name of the resource that will be used
          def templateName = 'routingservice'
          // name of testing project
          def testingProject = 'iot-testing'
          // NOTE, the "pipeline" directive/closure from the declarative pipeline syntax needs to include, or be nested outside,
          // and "openshift" directive/closure from the OpenShift Client Plugin for Jenkins.  Otherwise, the declarative pipeline engine
          // will not be fully engaged.
          pipeline {
              agent {
                node {
                  // spin up a maven slave pod to run this build on
                  label 'maven'
                }
              }
              options {
                  // set a timeout of 20 minutes for this pipeline
                  timeout(time: 20, unit: 'MINUTES')
              }

              stages {
                  stage('preamble') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Using project: ${openshift.project()}"
                                  }
                              }
                          }
                      }
                  }
                  stage('build') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def builds = openshift.selector("bc", templateName).related('builds')
                                      builds.untilEach(1) {
                                          return (it.object().status.phase == "Complete")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('test') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Just an empty test!"
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('deploy') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def rm = openshift.selector("dc", templateName).rollout()
                                      openshift.selector("dc", templateName).related('pods').untilEach(1) {
                                          return (it.object().status.phase == "Running")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('tag') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      // if everything else succeeded, tag the ${templateName}:latest image as ${testingProject}/${templateName}:latest
                                      openshift.tag("${openshift.project()}/${templateName}:latest", "${testingProject}/${templateName}:latest")
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
              } // stages
          } // pipeline
      type: JenkinsPipeline
    triggers: []
  status:
    lastVersion: 0
- apiVersion: v1
  kind: BuildConfig
  metadata:
    annotations:
      openshift.io/generated-by: OpenShiftWebConsole
    creationTimestamp: null
    labels:
      app: software-sensor
    name: software-sensor
  spec:
    nodeSelector: null
    output:
      to:
        kind: ImageStreamTag
        name: software-sensor:latest
    postCommit: {}
    resources: {}
    runPolicy: Serial
    source:
      git:
        ref: master
        uri: https://github.com/alezzandro/iotgw_Software_Sensor
      type: Git
    strategy:
      sourceStrategy:
        from:
          kind: ImageStreamTag
          name: redhat-openjdk18-openshift:1.2
          namespace: openshift
      type: Source
    triggers:
    - imageChange: {}
      type: ImageChange
    - type: ConfigChange
    - generic:
        secret: 853f945561652aac
      type: Generic
    - github:
        secret: 9c8427fe09128f32
      type: GitHub
  status:
    lastVersion: 0
- apiVersion: v1
  kind: BuildConfig
  metadata:
    creationTimestamp: null
    name: software-sensor-pipeline
  spec:
    nodeSelector: {}
    output: {}
    postCommit: {}
    resources: {}
    runPolicy: Serial
    source:
      type: None
    strategy:
      jenkinsPipelineStrategy:
        jenkinsfile: |-
          // name of the resource that will be used
          def templateName = 'software-sensor'
          // name of testing project
          def testingProject = 'iot-testing'
          // NOTE, the "pipeline" directive/closure from the declarative pipeline syntax needs to include, or be nested outside,
          // and "openshift" directive/closure from the OpenShift Client Plugin for Jenkins.  Otherwise, the declarative pipeline engine
          // will not be fully engaged.
          pipeline {
              agent {
                node {
                  // spin up a maven slave pod to run this build on
                  label 'maven'
                }
              }
              options {
                  // set a timeout of 20 minutes for this pipeline
                  timeout(time: 20, unit: 'MINUTES')
              }

              stages {
                  stage('preamble') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Using project: ${openshift.project()}"
                                  }
                              }
                          }
                      }
                  }
                  stage('build') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def builds = openshift.selector("bc", templateName).related('builds')
                                      builds.untilEach(1) {
                                          return (it.object().status.phase == "Complete")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('test') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Just an empty test!"
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('deploy') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def rm = openshift.selector("dc", templateName).rollout()
                                      openshift.selector("dc", templateName).related('pods').untilEach(1) {
                                          return (it.object().status.phase == "Running")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('tag') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      // if everything else succeeded, tag the ${templateName}:latest image as ${testingProject}/${templateName}:latest
                                      openshift.tag("${openshift.project()}/${templateName}:latest", "${testingProject}/${templateName}:latest")
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
              } // stages
          } // pipeline
      type: JenkinsPipeline
    triggers: []
  status:
    lastVersion: 0
- apiVersion: v1
  kind: Build
  metadata:
    annotations:
      openshift.io/build-config.name: businessrules
      openshift.io/build.number: "1"
      openshift.io/build.pod-name: businessrules-1-build
    creationTimestamp: null
    labels:
      app: businessrules
      buildconfig: businessrules
      openshift.io/build-config.name: businessrules
      openshift.io/build.start-policy: Serial
    name: businessrules-1
    ownerReferences:
    - apiVersion: build.openshift.io/v1
      controller: true
      kind: BuildConfig
      name: businessrules
      uid: 3de6c0a2-5471-11e8-a999-000d3a189887
  spec:
    nodeSelector: null
    output:
      pushSecret:
        name: builder-dockercfg-jm5tb
      to:
        kind: ImageStreamTag
        name: businessrules:latest
    postCommit: {}
    resources: {}
    revision:
      git:
        author:
          email: aarrichi@redhat.com
          name: Alessandro Arrichiello
        commit: 3363f312ec156eab54e8df7965973e83c3bdf849
        committer:
          email: aarrichi@redhat.com
          name: Alessandro Arrichiello
        message: Edit decision table
      type: Git
    serviceAccount: builder
    source:
      git:
        ref: master
        uri: https://github.com/alezzandro/iotgw_BusinessRules_Service
      type: Git
    strategy:
      sourceStrategy:
        from:
          kind: DockerImage
          name: registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429
      type: Source
    triggeredBy:
    - imageChangeBuild:
        fromRef:
          kind: ImageStreamTag
          name: redhat-openjdk18-openshift:1.2
          namespace: openshift
        imageID: registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429
      message: Image change
  status:
    config:
      name: businessrules
    output:
      to:
        imageDigest: sha256:7cbb14ec9de68c836574aa0355f422fd61d8fff642640ba1a235fa0e3fb9c1a5
    outputDockerImageReference: 172.30.1.1:5000/iot-development/businessrules:latest
    phase: New
    stages:
    - durationMilliseconds: 545
      name: FetchInputs
      startTime: 2018-05-10T16:48:27Z
      steps:
      - durationMilliseconds: 545
        name: FetchGitSource
        startTime: 2018-05-10T16:48:27Z
    - durationMilliseconds: 2808
      name: CommitContainer
      startTime: 2018-05-10T16:52:32Z
      steps:
      - durationMilliseconds: 2808
        name: CommitContainer
        startTime: 2018-05-10T16:52:32Z
    - durationMilliseconds: 160341
      name: Assemble
      startTime: 2018-05-10T16:49:55Z
      steps:
      - durationMilliseconds: 160341
        name: AssembleBuildScripts
        startTime: 2018-05-10T16:49:55Z
    - durationMilliseconds: 23458
      name: PushImage
      startTime: 2018-05-10T16:52:36Z
      steps:
      - durationMilliseconds: 23458
        name: PushImage
        startTime: 2018-05-10T16:52:36Z
- apiVersion: v1
  kind: Build
  metadata:
    annotations:
      openshift.io/build-config.name: businessrules
      openshift.io/build.number: "2"
      openshift.io/build.pod-name: businessrules-2-build
    creationTimestamp: null
    labels:
      app: businessrules
      buildconfig: businessrules
      openshift.io/build-config.name: businessrules
      openshift.io/build.start-policy: Serial
    name: businessrules-2
    ownerReferences:
    - apiVersion: build.openshift.io/v1
      controller: true
      kind: BuildConfig
      name: businessrules
      uid: 3de6c0a2-5471-11e8-a999-000d3a189887
  spec:
    nodeSelector: null
    output:
      pushSecret:
        name: builder-dockercfg-jm5tb
      to:
        kind: ImageStreamTag
        name: businessrules:latest
    postCommit: {}
    resources: {}
    revision:
      git:
        author:
          email: aarrichi@redhat.com
          name: Alessandro Arrichiello
        commit: ecdf621e0930aa687bb1b4a68f9658955dc42170
        committer:
          email: aarrichi@redhat.com
          name: Alessandro Arrichiello
        message: Edit decision table
      type: Git
    serviceAccount: builder
    source:
      git:
        ref: master
        uri: https://github.com/alezzandro/iotgw_BusinessRules_Service
      type: Git
    strategy:
      sourceStrategy:
        from:
          kind: DockerImage
          name: registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429
      type: Source
    triggeredBy:
    - githubWebHook:
        revision:
          git:
            author:
              email: aarrichi@redhat.com
              name: Alessandro Arrichiello
            commit: ecdf621e0930aa687bb1b4a68f9658955dc42170
            committer:
              email: aarrichi@redhat.com
              name: Alessandro Arrichiello
            message: Edit decision table
          type: Git
        secret: <secret>
      message: GitHub WebHook
  status:
    config:
      name: businessrules
    output:
      to:
        imageDigest: sha256:96c3d3b5481b28093127353a36104451ded3f57702a0e969f121c1f2dd4bbcb8
    outputDockerImageReference: 172.30.1.1:5000/iot-development/businessrules:latest
    phase: New
    stages:
    - durationMilliseconds: 274
      name: FetchInputs
      startTime: 2018-05-11T12:37:56Z
      steps:
      - durationMilliseconds: 274
        name: FetchGitSource
        startTime: 2018-05-11T12:37:56Z
    - durationMilliseconds: 2249
      name: CommitContainer
      startTime: 2018-05-11T12:39:35Z
      steps:
      - durationMilliseconds: 2249
        name: CommitContainer
        startTime: 2018-05-11T12:39:35Z
    - durationMilliseconds: 98898
      name: Assemble
      startTime: 2018-05-11T12:37:59Z
      steps:
      - durationMilliseconds: 98898
        name: AssembleBuildScripts
        startTime: 2018-05-11T12:37:59Z
    - durationMilliseconds: 27128
      name: PushImage
      startTime: 2018-05-11T12:39:38Z
      steps:
      - durationMilliseconds: 27128
        name: PushImage
        startTime: 2018-05-11T12:39:38Z
- apiVersion: v1
  kind: Build
  metadata:
    annotations:
      openshift.io/build-config.name: businessrules-pipeline
      openshift.io/build.number: "1"
      openshift.io/jenkins-blueocean-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/blue/organizations/jenkins/iot-development%2Fiot-development-businessrules-pipeline/detail/iot-development-businessrules-pipeline/1/
      openshift.io/jenkins-build-uri: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/
      openshift.io/jenkins-console-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/console
      openshift.io/jenkins-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/consoleText
      openshift.io/jenkins-status-json: '{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/wfapi/describe"},"changesets":null,"pendingInputActions":null,"nextPendingInputAction":null,"artifacts":null},"id":"1","name":"#1","status":"FAILED","startTimeMillis":1526912268244,"endTimeMillis":1526912268244,"durationMillis":0,"queueDurationMillis":10,"pauseDurationMillis":0,"stages":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/6/wfapi/describe"},"log":null},"id":"6","name":"preamble","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913057610,"durationMillis":8939,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/9/wfapi/describe"},"log":null},"id":"9","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"","startTimeMillis":1526913065235,"durationMillis":120,"pauseDurationMillis":0,"parentNodes":["8"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/10/wfapi/describe"},"log":null},"id":"10","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913065355,"durationMillis":34,"pauseDurationMillis":0,"parentNodes":["9"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/11/wfapi/describe"},"log":null},"id":"11","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913065389,"durationMillis":203,"pauseDurationMillis":0,"parentNodes":["10"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/12/wfapi/describe"},"log":null},"id":"12","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913065592,"durationMillis":406,"pauseDurationMillis":0,"parentNodes":["11"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/13/wfapi/describe"},"log":null},"id":"13","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"Using
        project: iot-development","startTimeMillis":1526913065998,"durationMillis":2,"pauseDurationMillis":0,"parentNodes":["12"]}],"allChildNodeIds":["7","8","9","10","11","12","13","14","15"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/19/wfapi/describe"},"log":null},"id":"19","name":"build","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913066737,"durationMillis":14931,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/22/wfapi/describe"},"log":null},"id":"22","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913066941,"durationMillis":339,"pauseDurationMillis":0,"parentNodes":["21"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/23/wfapi/describe"},"log":null},"id":"23","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913067280,"durationMillis":310,"pauseDurationMillis":0,"parentNodes":["22"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/24/wfapi/describe"},"log":null},"id":"24","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913067590,"durationMillis":82,"pauseDurationMillis":0,"parentNodes":["23"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/25/wfapi/describe"},"log":null},"id":"25","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913067672,"durationMillis":111,"pauseDurationMillis":0,"parentNodes":["24"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/28/wfapi/describe"},"log":null},"id":"28","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913073917,"durationMillis":35,"pauseDurationMillis":0,"parentNodes":["27"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/29/wfapi/describe"},"log":null},"id":"29","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913073952,"durationMillis":50,"pauseDurationMillis":0,"parentNodes":["28"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/30/wfapi/describe"},"log":null},"id":"30","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913074002,"durationMillis":774,"pauseDurationMillis":0,"parentNodes":["29"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/31/wfapi/describe"},"log":null},"id":"31","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913074776,"durationMillis":25,"pauseDurationMillis":0,"parentNodes":["30"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/32/wfapi/describe"},"log":null},"id":"32","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913074801,"durationMillis":296,"pauseDurationMillis":0,"parentNodes":["31"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/33/wfapi/describe"},"log":null},"id":"33","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913075097,"durationMillis":1028,"pauseDurationMillis":0,"parentNodes":["32"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/34/wfapi/describe"},"log":null},"id":"34","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913076125,"durationMillis":33,"pauseDurationMillis":0,"parentNodes":["33"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/35/wfapi/describe"},"log":null},"id":"35","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913076158,"durationMillis":180,"pauseDurationMillis":0,"parentNodes":["34"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/36/wfapi/describe"},"log":null},"id":"36","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913076338,"durationMillis":1073,"pauseDurationMillis":0,"parentNodes":["35"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/37/wfapi/describe"},"log":null},"id":"37","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913077411,"durationMillis":25,"pauseDurationMillis":0,"parentNodes":["36"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/38/wfapi/describe"},"log":null},"id":"38","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913077436,"durationMillis":22,"pauseDurationMillis":0,"parentNodes":["37"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/39/wfapi/describe"},"log":null},"id":"39","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913077458,"durationMillis":1146,"pauseDurationMillis":0,"parentNodes":["38"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/40/wfapi/describe"},"log":null},"id":"40","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913078604,"durationMillis":48,"pauseDurationMillis":0,"parentNodes":["39"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/41/wfapi/describe"},"log":null},"id":"41","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913078652,"durationMillis":51,"pauseDurationMillis":0,"parentNodes":["40"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/42/wfapi/describe"},"log":null},"id":"42","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913078703,"durationMillis":330,"pauseDurationMillis":0,"parentNodes":["41"]}],"allChildNodeIds":["20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/50/wfapi/describe"},"log":null},"id":"50","name":"test","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913081711,"durationMillis":239,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/53/wfapi/describe"},"log":null},"id":"53","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913081776,"durationMillis":25,"pauseDurationMillis":0,"parentNodes":["52"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/54/wfapi/describe"},"log":null},"id":"54","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913081801,"durationMillis":26,"pauseDurationMillis":0,"parentNodes":["53"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/55/wfapi/describe"},"log":null},"id":"55","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"Just
        an empty test!","startTimeMillis":1526913081827,"durationMillis":2,"pauseDurationMillis":0,"parentNodes":["54"]}],"allChildNodeIds":["51","52","53","54","55","56","57"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/61/wfapi/describe"},"log":null},"id":"61","name":"deploy","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913082227,"durationMillis":3133,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/64/wfapi/describe"},"log":null},"id":"64","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913082474,"durationMillis":23,"pauseDurationMillis":0,"parentNodes":["63"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/65/wfapi/describe"},"log":null},"id":"65","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913082497,"durationMillis":131,"pauseDurationMillis":0,"parentNodes":["64"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/66/wfapi/describe"},"log":null},"id":"66","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913082628,"durationMillis":31,"pauseDurationMillis":0,"parentNodes":["65"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/67/wfapi/describe"},"log":null},"id":"67","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913082659,"durationMillis":59,"pauseDurationMillis":0,"parentNodes":["66"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/70/wfapi/describe"},"log":null},"id":"70","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913082880,"durationMillis":36,"pauseDurationMillis":0,"parentNodes":["69"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/71/wfapi/describe"},"log":null},"id":"71","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913082916,"durationMillis":27,"pauseDurationMillis":0,"parentNodes":["70"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/72/wfapi/describe"},"log":null},"id":"72","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913082943,"durationMillis":1168,"pauseDurationMillis":0,"parentNodes":["71"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/73/wfapi/describe"},"log":null},"id":"73","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913084111,"durationMillis":16,"pauseDurationMillis":0,"parentNodes":["72"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/74/wfapi/describe"},"log":null},"id":"74","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913084127,"durationMillis":15,"pauseDurationMillis":0,"parentNodes":["73"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/75/wfapi/describe"},"log":null},"id":"75","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913084142,"durationMillis":644,"pauseDurationMillis":0,"parentNodes":["74"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/76/wfapi/describe"},"log":null},"id":"76","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913084786,"durationMillis":18,"pauseDurationMillis":0,"parentNodes":["75"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/77/wfapi/describe"},"log":null},"id":"77","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913084804,"durationMillis":21,"pauseDurationMillis":0,"parentNodes":["76"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/78/wfapi/describe"},"log":null},"id":"78","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913084825,"durationMillis":409,"pauseDurationMillis":0,"parentNodes":["77"]}],"allChildNodeIds":["62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/86/wfapi/describe"},"log":null},"id":"86","name":"tag","execNode":"","status":"FAILED","error":{"message":"tag
        returned an error;\n{reference={}, err=error: invalid SOURCE: invalid reference
        format, verb=tag, cmd=oc --server=https://172.30.0.1:443 --certificate-authority=/var/run/secrets/kubernetes.io/serviceaccount/ca.crt
        --namespace=iot-development --token=XXXXX tag [namespace:iot-development,
        sourceStream:businessrules, sourceTag:latest, destinationNamespace:iot-testing,
        destinationStream:businessrules, destinationTag:latest] , out=, status=1}\n","type":"hudson.AbortException"},"parameterDescription":null,"startTimeMillis":1526913085389,"durationMillis":861,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/89/wfapi/describe"},"log":null},"id":"89","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913085439,"durationMillis":11,"pauseDurationMillis":0,"parentNodes":["88"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/90/wfapi/describe"},"log":null},"id":"90","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913085450,"durationMillis":15,"pauseDurationMillis":0,"parentNodes":["89"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/91/wfapi/describe"},"log":null},"id":"91","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913085465,"durationMillis":25,"pauseDurationMillis":0,"parentNodes":["90"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/92/wfapi/describe"},"log":null},"id":"92","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913085490,"durationMillis":26,"pauseDurationMillis":0,"parentNodes":["91"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/93/wfapi/describe"},"log":null},"id":"93","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913085516,"durationMillis":25,"pauseDurationMillis":0,"parentNodes":["92"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/1/execution/node/94/wfapi/describe"},"log":null},"id":"94","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913085541,"durationMillis":383,"pauseDurationMillis":0,"parentNodes":["93"]}],"allChildNodeIds":["87","88","89","90","91","92","93","94","95","96"]}]}'
    creationTimestamp: null
    labels:
      buildconfig: businessrules-pipeline
      openshift.io/build-config.name: businessrules-pipeline
      openshift.io/build.start-policy: Serial
    name: businessrules-pipeline-1
    ownerReferences:
    - apiVersion: build.openshift.io/v1
      controller: true
      kind: BuildConfig
      name: businessrules-pipeline
      uid: b61012b9-5d01-11e8-bf27-000d3a189887
  spec:
    nodeSelector: {}
    output: {}
    postCommit: {}
    resources: {}
    serviceAccount: builder
    source:
      type: None
    strategy:
      jenkinsPipelineStrategy:
        jenkinsfile: |-
          // name of the resource that will be used
          def templateName = 'businessrules'
          // name of testing project
          def testingProject = 'iot-testing'
          // NOTE, the "pipeline" directive/closure from the declarative pipeline syntax needs to include, or be nested outside,
          // and "openshift" directive/closure from the OpenShift Client Plugin for Jenkins.  Otherwise, the declarative pipeline engine
          // will not be fully engaged.
          pipeline {
              agent {
                node {
                  // spin up a maven slave pod to run this build on
                  label 'maven'
                }
              }
              options {
                  // set a timeout of 20 minutes for this pipeline
                  timeout(time: 20, unit: 'MINUTES')
              }

              stages {
                  stage('preamble') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Using project: ${openshift.project()}"
                                  }
                              }
                          }
                      }
                  }
                  stage('build') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def builds = openshift.selector("bc", templateName).related('builds')
                                      builds.untilEach(1) {
                                          return (it.object().status.phase == "Complete")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('test') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Just an empty test!"
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('deploy') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def rm = openshift.selector("dc", templateName).rollout()
                                      openshift.selector("dc", templateName).related('pods').untilEach(1) {
                                          return (it.object().status.phase == "Running")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('tag') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      // if everything else succeeded, tag the ${templateName}:latest image as ${testingProject}/${templateName}:latest
                                      openshift.tag(namespace: "${openshift.project()}", sourceStream: "${templateName}", sourceTag: "latest", destinationNamespace: "${testingProject}", destinationStream: "${templateName}", destinationTag:"latest")
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
              } // stages
          } // pipeline
      type: JenkinsPipeline
    triggeredBy:
    - message: Manually triggered
  status:
    config:
      name: businessrules-pipeline
    output: {}
    phase: New
- apiVersion: v1
  kind: Build
  metadata:
    annotations:
      openshift.io/build-config.name: businessrules-pipeline
      openshift.io/build.number: "2"
      openshift.io/jenkins-blueocean-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/blue/organizations/jenkins/iot-development%2Fiot-development-businessrules-pipeline/detail/iot-development-businessrules-pipeline/2/
      openshift.io/jenkins-build-uri: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/
      openshift.io/jenkins-console-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/console
      openshift.io/jenkins-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/consoleText
      openshift.io/jenkins-status-json: '{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/wfapi/describe"},"changesets":null,"pendingInputActions":null,"nextPendingInputAction":null,"artifacts":null},"id":"2","name":"#2","status":"FAILED","startTimeMillis":1526913727413,"endTimeMillis":1526913727413,"durationMillis":0,"queueDurationMillis":5,"pauseDurationMillis":0,"stages":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/8/wfapi/describe"},"log":null},"id":"8","name":"preamble","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913758537,"durationMillis":5521,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/11/wfapi/describe"},"log":null},"id":"11","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"","startTimeMillis":1526913762382,"durationMillis":236,"pauseDurationMillis":0,"parentNodes":["10"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/12/wfapi/describe"},"log":null},"id":"12","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913762618,"durationMillis":14,"pauseDurationMillis":0,"parentNodes":["11"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/13/wfapi/describe"},"log":null},"id":"13","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913762632,"durationMillis":28,"pauseDurationMillis":0,"parentNodes":["12"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/14/wfapi/describe"},"log":null},"id":"14","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913762660,"durationMillis":1371,"pauseDurationMillis":0,"parentNodes":["13"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/15/wfapi/describe"},"log":null},"id":"15","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"Using
        project: iot-development","startTimeMillis":1526913764031,"durationMillis":1,"pauseDurationMillis":0,"parentNodes":["14"]}],"allChildNodeIds":["9","10","11","12","13","14","15","16","17"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/21/wfapi/describe"},"log":null},"id":"21","name":"build","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913764154,"durationMillis":10763,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/24/wfapi/describe"},"log":null},"id":"24","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913764191,"durationMillis":18,"pauseDurationMillis":0,"parentNodes":["23"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/25/wfapi/describe"},"log":null},"id":"25","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913764209,"durationMillis":83,"pauseDurationMillis":0,"parentNodes":["24"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/26/wfapi/describe"},"log":null},"id":"26","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913764292,"durationMillis":19,"pauseDurationMillis":0,"parentNodes":["25"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/27/wfapi/describe"},"log":null},"id":"27","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913764311,"durationMillis":25,"pauseDurationMillis":0,"parentNodes":["26"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/30/wfapi/describe"},"log":null},"id":"30","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913767953,"durationMillis":24,"pauseDurationMillis":0,"parentNodes":["29"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/31/wfapi/describe"},"log":null},"id":"31","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913767977,"durationMillis":22,"pauseDurationMillis":0,"parentNodes":["30"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/32/wfapi/describe"},"log":null},"id":"32","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913767999,"durationMillis":375,"pauseDurationMillis":0,"parentNodes":["31"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/33/wfapi/describe"},"log":null},"id":"33","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913768374,"durationMillis":180,"pauseDurationMillis":0,"parentNodes":["32"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/34/wfapi/describe"},"log":null},"id":"34","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913768554,"durationMillis":25,"pauseDurationMillis":0,"parentNodes":["33"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/35/wfapi/describe"},"log":null},"id":"35","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913768579,"durationMillis":346,"pauseDurationMillis":0,"parentNodes":["34"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/36/wfapi/describe"},"log":null},"id":"36","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913768925,"durationMillis":17,"pauseDurationMillis":0,"parentNodes":["35"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/37/wfapi/describe"},"log":null},"id":"37","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913768942,"durationMillis":16,"pauseDurationMillis":0,"parentNodes":["36"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/38/wfapi/describe"},"log":null},"id":"38","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913768958,"durationMillis":817,"pauseDurationMillis":0,"parentNodes":["37"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/39/wfapi/describe"},"log":null},"id":"39","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913769775,"durationMillis":33,"pauseDurationMillis":0,"parentNodes":["38"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/40/wfapi/describe"},"log":null},"id":"40","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913769808,"durationMillis":47,"pauseDurationMillis":0,"parentNodes":["39"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/41/wfapi/describe"},"log":null},"id":"41","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913769855,"durationMillis":349,"pauseDurationMillis":0,"parentNodes":["40"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/42/wfapi/describe"},"log":null},"id":"42","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913770204,"durationMillis":28,"pauseDurationMillis":0,"parentNodes":["41"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/43/wfapi/describe"},"log":null},"id":"43","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913770232,"durationMillis":21,"pauseDurationMillis":0,"parentNodes":["42"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/44/wfapi/describe"},"log":null},"id":"44","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913770253,"durationMillis":313,"pauseDurationMillis":0,"parentNodes":["43"]}],"allChildNodeIds":["22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/52/wfapi/describe"},"log":null},"id":"52","name":"test","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913775110,"durationMillis":110,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/55/wfapi/describe"},"log":null},"id":"55","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913775173,"durationMillis":11,"pauseDurationMillis":0,"parentNodes":["54"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/56/wfapi/describe"},"log":null},"id":"56","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913775184,"durationMillis":16,"pauseDurationMillis":0,"parentNodes":["55"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/57/wfapi/describe"},"log":null},"id":"57","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"Just
        an empty test!","startTimeMillis":1526913775200,"durationMillis":1,"pauseDurationMillis":0,"parentNodes":["56"]}],"allChildNodeIds":["53","54","55","56","57","58","59"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/63/wfapi/describe"},"log":null},"id":"63","name":"deploy","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913775234,"durationMillis":2100,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/66/wfapi/describe"},"log":null},"id":"66","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913775264,"durationMillis":20,"pauseDurationMillis":0,"parentNodes":["65"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/67/wfapi/describe"},"log":null},"id":"67","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913775284,"durationMillis":204,"pauseDurationMillis":0,"parentNodes":["66"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/68/wfapi/describe"},"log":null},"id":"68","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913775488,"durationMillis":16,"pauseDurationMillis":0,"parentNodes":["67"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/69/wfapi/describe"},"log":null},"id":"69","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913775504,"durationMillis":17,"pauseDurationMillis":0,"parentNodes":["68"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/72/wfapi/describe"},"log":null},"id":"72","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913775612,"durationMillis":25,"pauseDurationMillis":0,"parentNodes":["71"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/73/wfapi/describe"},"log":null},"id":"73","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913775637,"durationMillis":18,"pauseDurationMillis":0,"parentNodes":["72"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/74/wfapi/describe"},"log":null},"id":"74","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913775655,"durationMillis":644,"pauseDurationMillis":0,"parentNodes":["73"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/75/wfapi/describe"},"log":null},"id":"75","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913776299,"durationMillis":161,"pauseDurationMillis":0,"parentNodes":["74"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/76/wfapi/describe"},"log":null},"id":"76","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913776460,"durationMillis":13,"pauseDurationMillis":0,"parentNodes":["75"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/77/wfapi/describe"},"log":null},"id":"77","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913776473,"durationMillis":313,"pauseDurationMillis":0,"parentNodes":["76"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/78/wfapi/describe"},"log":null},"id":"78","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913776786,"durationMillis":13,"pauseDurationMillis":0,"parentNodes":["77"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/79/wfapi/describe"},"log":null},"id":"79","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913776799,"durationMillis":15,"pauseDurationMillis":0,"parentNodes":["78"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/80/wfapi/describe"},"log":null},"id":"80","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913776814,"durationMillis":320,"pauseDurationMillis":0,"parentNodes":["79"]}],"allChildNodeIds":["64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/88/wfapi/describe"},"log":null},"id":"88","name":"tag","execNode":"","status":"FAILED","error":{"message":"tag
        returned an error;\n{reference={}, err=error: invalid SOURCE: invalid reference
        format, verb=tag, cmd=oc --server=https://172.30.0.1:443 --certificate-authority=/var/run/secrets/kubernetes.io/serviceaccount/ca.crt
        --namespace=iot-development --token=XXXXX tag [namespace:iot-development,
        sourceStream:businessrules, sourceTag:latest, destinationNamespace:iot-testing,
        destinationStream:businessrules, destinationTag:latest] , out=, status=1}\n","type":"hudson.AbortException"},"parameterDescription":null,"startTimeMillis":1526913777353,"durationMillis":621,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/91/wfapi/describe"},"log":null},"id":"91","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913777390,"durationMillis":9,"pauseDurationMillis":0,"parentNodes":["90"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/92/wfapi/describe"},"log":null},"id":"92","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913777399,"durationMillis":14,"pauseDurationMillis":0,"parentNodes":["91"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/93/wfapi/describe"},"log":null},"id":"93","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913777413,"durationMillis":17,"pauseDurationMillis":0,"parentNodes":["92"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/94/wfapi/describe"},"log":null},"id":"94","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526913777430,"durationMillis":12,"pauseDurationMillis":0,"parentNodes":["93"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/95/wfapi/describe"},"log":null},"id":"95","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526913777442,"durationMillis":12,"pauseDurationMillis":0,"parentNodes":["94"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/2/execution/node/96/wfapi/describe"},"log":null},"id":"96","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526913777454,"durationMillis":321,"pauseDurationMillis":0,"parentNodes":["95"]}],"allChildNodeIds":["89","90","91","92","93","94","95","96","97","98"]}]}'
    creationTimestamp: null
    labels:
      buildconfig: businessrules-pipeline
      openshift.io/build-config.name: businessrules-pipeline
      openshift.io/build.start-policy: Serial
    name: businessrules-pipeline-2
    ownerReferences:
    - apiVersion: build.openshift.io/v1
      controller: true
      kind: BuildConfig
      name: businessrules-pipeline
      uid: b61012b9-5d01-11e8-bf27-000d3a189887
  spec:
    nodeSelector: {}
    output: {}
    postCommit: {}
    resources: {}
    serviceAccount: builder
    source:
      type: None
    strategy:
      jenkinsPipelineStrategy:
        jenkinsfile: |-
          // name of the resource that will be used
          def templateName = 'businessrules'
          // name of testing project
          def testingProject = 'iot-testing'
          // NOTE, the "pipeline" directive/closure from the declarative pipeline syntax needs to include, or be nested outside,
          // and "openshift" directive/closure from the OpenShift Client Plugin for Jenkins.  Otherwise, the declarative pipeline engine
          // will not be fully engaged.
          pipeline {
              agent {
                node {
                  // spin up a maven slave pod to run this build on
                  label 'maven'
                }
              }
              options {
                  // set a timeout of 20 minutes for this pipeline
                  timeout(time: 20, unit: 'MINUTES')
              }

              stages {
                  stage('preamble') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Using project: ${openshift.project()}"
                                  }
                              }
                          }
                      }
                  }
                  stage('build') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def builds = openshift.selector("bc", templateName).related('builds')
                                      builds.untilEach(1) {
                                          return (it.object().status.phase == "Complete")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('test') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Just an empty test!"
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('deploy') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def rm = openshift.selector("dc", templateName).rollout()
                                      openshift.selector("dc", templateName).related('pods').untilEach(1) {
                                          return (it.object().status.phase == "Running")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('tag') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      // if everything else succeeded, tag the ${templateName}:latest image as ${testingProject}/${templateName}:latest
                                      openshift.tag(namespace: "${openshift.project()}", sourceStream: "${templateName}", sourceTag: "latest", destinationNamespace: "${testingProject}", destinationStream: "${templateName}", destinationTag:"latest")
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
              } // stages
          } // pipeline
      type: JenkinsPipeline
    triggeredBy:
    - message: Manually triggered
  status:
    config:
      name: businessrules-pipeline
    output: {}
    phase: New
- apiVersion: v1
  kind: Build
  metadata:
    annotations:
      openshift.io/build-config.name: businessrules-pipeline
      openshift.io/build.number: "3"
      openshift.io/jenkins-blueocean-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/blue/organizations/jenkins/iot-development%2Fiot-development-businessrules-pipeline/detail/iot-development-businessrules-pipeline/3/
      openshift.io/jenkins-build-uri: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/
      openshift.io/jenkins-console-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/console
      openshift.io/jenkins-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/consoleText
      openshift.io/jenkins-status-json: '{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/wfapi/describe"},"changesets":null,"pendingInputActions":null,"nextPendingInputAction":null,"artifacts":null},"id":"3","name":"#3","status":"FAILED","startTimeMillis":1526914466221,"endTimeMillis":1526914466221,"durationMillis":0,"queueDurationMillis":12,"pauseDurationMillis":0,"stages":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/8/wfapi/describe"},"log":null},"id":"8","name":"preamble","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914497130,"durationMillis":5344,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/11/wfapi/describe"},"log":null},"id":"11","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"","startTimeMillis":1526914502166,"durationMillis":67,"pauseDurationMillis":0,"parentNodes":["10"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/12/wfapi/describe"},"log":null},"id":"12","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914502233,"durationMillis":12,"pauseDurationMillis":0,"parentNodes":["11"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/13/wfapi/describe"},"log":null},"id":"13","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914502245,"durationMillis":29,"pauseDurationMillis":0,"parentNodes":["12"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/14/wfapi/describe"},"log":null},"id":"14","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526914502274,"durationMillis":178,"pauseDurationMillis":0,"parentNodes":["13"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/15/wfapi/describe"},"log":null},"id":"15","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"Using
        project: iot-development","startTimeMillis":1526914502452,"durationMillis":1,"pauseDurationMillis":0,"parentNodes":["14"]}],"allChildNodeIds":["9","10","11","12","13","14","15","16","17"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/21/wfapi/describe"},"log":null},"id":"21","name":"build","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914503093,"durationMillis":7568,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/24/wfapi/describe"},"log":null},"id":"24","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914503124,"durationMillis":10,"pauseDurationMillis":0,"parentNodes":["23"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/25/wfapi/describe"},"log":null},"id":"25","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914503134,"durationMillis":79,"pauseDurationMillis":0,"parentNodes":["24"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/26/wfapi/describe"},"log":null},"id":"26","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526914503213,"durationMillis":21,"pauseDurationMillis":0,"parentNodes":["25"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/27/wfapi/describe"},"log":null},"id":"27","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526914503234,"durationMillis":18,"pauseDurationMillis":0,"parentNodes":["26"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/30/wfapi/describe"},"log":null},"id":"30","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526914505050,"durationMillis":18,"pauseDurationMillis":0,"parentNodes":["29"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/31/wfapi/describe"},"log":null},"id":"31","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526914505068,"durationMillis":19,"pauseDurationMillis":0,"parentNodes":["30"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/32/wfapi/describe"},"log":null},"id":"32","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914505087,"durationMillis":771,"pauseDurationMillis":0,"parentNodes":["31"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/33/wfapi/describe"},"log":null},"id":"33","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526914505858,"durationMillis":16,"pauseDurationMillis":0,"parentNodes":["32"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/34/wfapi/describe"},"log":null},"id":"34","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526914505874,"durationMillis":27,"pauseDurationMillis":0,"parentNodes":["33"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/35/wfapi/describe"},"log":null},"id":"35","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914505901,"durationMillis":1116,"pauseDurationMillis":0,"parentNodes":["34"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/36/wfapi/describe"},"log":null},"id":"36","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526914507017,"durationMillis":18,"pauseDurationMillis":0,"parentNodes":["35"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/37/wfapi/describe"},"log":null},"id":"37","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526914507035,"durationMillis":12,"pauseDurationMillis":0,"parentNodes":["36"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/38/wfapi/describe"},"log":null},"id":"38","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914507047,"durationMillis":667,"pauseDurationMillis":0,"parentNodes":["37"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/39/wfapi/describe"},"log":null},"id":"39","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526914507714,"durationMillis":26,"pauseDurationMillis":0,"parentNodes":["38"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/40/wfapi/describe"},"log":null},"id":"40","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526914507740,"durationMillis":28,"pauseDurationMillis":0,"parentNodes":["39"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/41/wfapi/describe"},"log":null},"id":"41","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914507768,"durationMillis":328,"pauseDurationMillis":0,"parentNodes":["40"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/42/wfapi/describe"},"log":null},"id":"42","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526914508096,"durationMillis":18,"pauseDurationMillis":0,"parentNodes":["41"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/43/wfapi/describe"},"log":null},"id":"43","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526914508114,"durationMillis":18,"pauseDurationMillis":0,"parentNodes":["42"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/44/wfapi/describe"},"log":null},"id":"44","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914508132,"durationMillis":319,"pauseDurationMillis":0,"parentNodes":["43"]}],"allChildNodeIds":["22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/52/wfapi/describe"},"log":null},"id":"52","name":"test","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914510703,"durationMillis":99,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/55/wfapi/describe"},"log":null},"id":"55","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914510752,"durationMillis":7,"pauseDurationMillis":0,"parentNodes":["54"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/56/wfapi/describe"},"log":null},"id":"56","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914510759,"durationMillis":13,"pauseDurationMillis":0,"parentNodes":["55"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/57/wfapi/describe"},"log":null},"id":"57","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"Just
        an empty test!","startTimeMillis":1526914510772,"durationMillis":2,"pauseDurationMillis":0,"parentNodes":["56"]}],"allChildNodeIds":["53","54","55","56","57","58","59"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/63/wfapi/describe"},"log":null},"id":"63","name":"deploy","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914510815,"durationMillis":2299,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/66/wfapi/describe"},"log":null},"id":"66","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914510846,"durationMillis":14,"pauseDurationMillis":0,"parentNodes":["65"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/67/wfapi/describe"},"log":null},"id":"67","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914510860,"durationMillis":35,"pauseDurationMillis":0,"parentNodes":["66"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/68/wfapi/describe"},"log":null},"id":"68","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526914510895,"durationMillis":14,"pauseDurationMillis":0,"parentNodes":["67"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/69/wfapi/describe"},"log":null},"id":"69","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526914510909,"durationMillis":14,"pauseDurationMillis":0,"parentNodes":["68"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/72/wfapi/describe"},"log":null},"id":"72","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526914510996,"durationMillis":37,"pauseDurationMillis":0,"parentNodes":["71"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/73/wfapi/describe"},"log":null},"id":"73","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526914511033,"durationMillis":23,"pauseDurationMillis":0,"parentNodes":["72"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/74/wfapi/describe"},"log":null},"id":"74","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914511056,"durationMillis":666,"pauseDurationMillis":0,"parentNodes":["73"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/75/wfapi/describe"},"log":null},"id":"75","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526914511722,"durationMillis":18,"pauseDurationMillis":0,"parentNodes":["74"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/76/wfapi/describe"},"log":null},"id":"76","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526914511740,"durationMillis":17,"pauseDurationMillis":0,"parentNodes":["75"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/77/wfapi/describe"},"log":null},"id":"77","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914511757,"durationMillis":626,"pauseDurationMillis":0,"parentNodes":["76"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/78/wfapi/describe"},"log":null},"id":"78","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526914512383,"durationMillis":14,"pauseDurationMillis":0,"parentNodes":["77"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/79/wfapi/describe"},"log":null},"id":"79","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526914512397,"durationMillis":23,"pauseDurationMillis":0,"parentNodes":["78"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/80/wfapi/describe"},"log":null},"id":"80","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914512420,"durationMillis":634,"pauseDurationMillis":0,"parentNodes":["79"]}],"allChildNodeIds":["64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/88/wfapi/describe"},"log":null},"id":"88","name":"tag","execNode":"","status":"FAILED","error":{"message":"tag
        returned an error;\n{reference={}, err=error: invalid SOURCE: invalid reference
        format, verb=tag, cmd=oc --server=https://172.30.0.1:443 --certificate-authority=/var/run/secrets/kubernetes.io/serviceaccount/ca.crt
        --namespace=iot-development --token=XXXXX tag [namespace:iot-development,
        sourceStream:businessrules, sourceTag:latest, destinationNamespace:iot-testing,
        destinationStream:businessrules, destinationTag:latest] , out=, status=1}\n","type":"hudson.AbortException"},"parameterDescription":null,"startTimeMillis":1526914513126,"durationMillis":1362,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/91/wfapi/describe"},"log":null},"id":"91","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914513181,"durationMillis":73,"pauseDurationMillis":0,"parentNodes":["90"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/92/wfapi/describe"},"log":null},"id":"92","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914513254,"durationMillis":138,"pauseDurationMillis":0,"parentNodes":["91"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/93/wfapi/describe"},"log":null},"id":"93","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526914513392,"durationMillis":189,"pauseDurationMillis":0,"parentNodes":["92"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/94/wfapi/describe"},"log":null},"id":"94","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526914513581,"durationMillis":164,"pauseDurationMillis":0,"parentNodes":["93"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/95/wfapi/describe"},"log":null},"id":"95","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526914513745,"durationMillis":87,"pauseDurationMillis":0,"parentNodes":["94"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/3/execution/node/96/wfapi/describe"},"log":null},"id":"96","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526914513832,"durationMillis":615,"pauseDurationMillis":0,"parentNodes":["95"]}],"allChildNodeIds":["89","90","91","92","93","94","95","96","97","98"]}]}'
    creationTimestamp: null
    labels:
      buildconfig: businessrules-pipeline
      openshift.io/build-config.name: businessrules-pipeline
      openshift.io/build.start-policy: Serial
    name: businessrules-pipeline-3
    ownerReferences:
    - apiVersion: build.openshift.io/v1
      controller: true
      kind: BuildConfig
      name: businessrules-pipeline
      uid: b61012b9-5d01-11e8-bf27-000d3a189887
  spec:
    nodeSelector: {}
    output: {}
    postCommit: {}
    resources: {}
    serviceAccount: builder
    source:
      type: None
    strategy:
      jenkinsPipelineStrategy:
        jenkinsfile: |-
          // name of the resource that will be used
          def templateName = 'businessrules'
          // name of testing project
          def testingProject = 'iot-testing'
          // NOTE, the "pipeline" directive/closure from the declarative pipeline syntax needs to include, or be nested outside,
          // and "openshift" directive/closure from the OpenShift Client Plugin for Jenkins.  Otherwise, the declarative pipeline engine
          // will not be fully engaged.
          pipeline {
              agent {
                node {
                  // spin up a maven slave pod to run this build on
                  label 'maven'
                }
              }
              options {
                  // set a timeout of 20 minutes for this pipeline
                  timeout(time: 20, unit: 'MINUTES')
              }

              stages {
                  stage('preamble') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Using project: ${openshift.project()}"
                                  }
                              }
                          }
                      }
                  }
                  stage('build') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def builds = openshift.selector("bc", templateName).related('builds')
                                      builds.untilEach(1) {
                                          return (it.object().status.phase == "Complete")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('test') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Just an empty test!"
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('deploy') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def rm = openshift.selector("dc", templateName).rollout()
                                      openshift.selector("dc", templateName).related('pods').untilEach(1) {
                                          return (it.object().status.phase == "Running")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('tag') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      // if everything else succeeded, tag the ${templateName}:latest image as ${testingProject}/${templateName}:latest
                                      openshift.tag(namespace: "${openshift.project()}", sourceStream: "${templateName}", sourceTag: "latest", destinationNamespace: "${testingProject}", destinationStream: "${templateName}", destinationTag:"latest")
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
              } // stages
          } // pipeline
      type: JenkinsPipeline
    triggeredBy:
    - message: Manually triggered
  status:
    config:
      name: businessrules-pipeline
    output: {}
    phase: New
- apiVersion: v1
  kind: Build
  metadata:
    annotations:
      openshift.io/build-config.name: businessrules-pipeline
      openshift.io/build.number: "4"
      openshift.io/jenkins-blueocean-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/blue/organizations/jenkins/iot-development%2Fiot-development-businessrules-pipeline/detail/iot-development-businessrules-pipeline/4/
      openshift.io/jenkins-build-uri: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/
      openshift.io/jenkins-console-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/console
      openshift.io/jenkins-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/consoleText
      openshift.io/jenkins-status-json: '{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/wfapi/describe"},"changesets":null,"pendingInputActions":null,"nextPendingInputAction":null,"artifacts":null},"id":"4","name":"#4","status":"SUCCESS","startTimeMillis":1526919662372,"endTimeMillis":1526919662372,"durationMillis":0,"queueDurationMillis":3,"pauseDurationMillis":0,"stages":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/8/wfapi/describe"},"log":null},"id":"8","name":"preamble","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919685009,"durationMillis":1771,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/11/wfapi/describe"},"log":null},"id":"11","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"","startTimeMillis":1526919686144,"durationMillis":34,"pauseDurationMillis":0,"parentNodes":["10"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/12/wfapi/describe"},"log":null},"id":"12","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919686178,"durationMillis":9,"pauseDurationMillis":0,"parentNodes":["11"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/13/wfapi/describe"},"log":null},"id":"13","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919686187,"durationMillis":197,"pauseDurationMillis":0,"parentNodes":["12"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/14/wfapi/describe"},"log":null},"id":"14","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919686384,"durationMillis":378,"pauseDurationMillis":0,"parentNodes":["13"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/15/wfapi/describe"},"log":null},"id":"15","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"Using
        project: iot-development","startTimeMillis":1526919686762,"durationMillis":1,"pauseDurationMillis":0,"parentNodes":["14"]}],"allChildNodeIds":["9","10","11","12","13","14","15","16","17"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/21/wfapi/describe"},"log":null},"id":"21","name":"build","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919687198,"durationMillis":6669,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/24/wfapi/describe"},"log":null},"id":"24","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919687238,"durationMillis":8,"pauseDurationMillis":0,"parentNodes":["23"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/25/wfapi/describe"},"log":null},"id":"25","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919687246,"durationMillis":56,"pauseDurationMillis":0,"parentNodes":["24"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/26/wfapi/describe"},"log":null},"id":"26","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919687302,"durationMillis":23,"pauseDurationMillis":0,"parentNodes":["25"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/27/wfapi/describe"},"log":null},"id":"27","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919687325,"durationMillis":14,"pauseDurationMillis":0,"parentNodes":["26"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/30/wfapi/describe"},"log":null},"id":"30","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919689115,"durationMillis":16,"pauseDurationMillis":0,"parentNodes":["29"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/31/wfapi/describe"},"log":null},"id":"31","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919689131,"durationMillis":15,"pauseDurationMillis":0,"parentNodes":["30"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/32/wfapi/describe"},"log":null},"id":"32","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919689146,"durationMillis":770,"pauseDurationMillis":0,"parentNodes":["31"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/33/wfapi/describe"},"log":null},"id":"33","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919689916,"durationMillis":11,"pauseDurationMillis":0,"parentNodes":["32"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/34/wfapi/describe"},"log":null},"id":"34","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919689927,"durationMillis":19,"pauseDurationMillis":0,"parentNodes":["33"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/35/wfapi/describe"},"log":null},"id":"35","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919689946,"durationMillis":630,"pauseDurationMillis":0,"parentNodes":["34"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/36/wfapi/describe"},"log":null},"id":"36","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919690576,"durationMillis":16,"pauseDurationMillis":0,"parentNodes":["35"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/37/wfapi/describe"},"log":null},"id":"37","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919690592,"durationMillis":12,"pauseDurationMillis":0,"parentNodes":["36"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/38/wfapi/describe"},"log":null},"id":"38","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919690604,"durationMillis":344,"pauseDurationMillis":0,"parentNodes":["37"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/39/wfapi/describe"},"log":null},"id":"39","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919690948,"durationMillis":26,"pauseDurationMillis":0,"parentNodes":["38"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/40/wfapi/describe"},"log":null},"id":"40","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919690974,"durationMillis":23,"pauseDurationMillis":0,"parentNodes":["39"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/41/wfapi/describe"},"log":null},"id":"41","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919690997,"durationMillis":317,"pauseDurationMillis":0,"parentNodes":["40"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/42/wfapi/describe"},"log":null},"id":"42","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919691314,"durationMillis":326,"pauseDurationMillis":0,"parentNodes":["41"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/43/wfapi/describe"},"log":null},"id":"43","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919691640,"durationMillis":54,"pauseDurationMillis":0,"parentNodes":["42"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/44/wfapi/describe"},"log":null},"id":"44","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919691694,"durationMillis":309,"pauseDurationMillis":0,"parentNodes":["43"]}],"allChildNodeIds":["22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/52/wfapi/describe"},"log":null},"id":"52","name":"test","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919693887,"durationMillis":69,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/55/wfapi/describe"},"log":null},"id":"55","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919693924,"durationMillis":7,"pauseDurationMillis":0,"parentNodes":["54"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/56/wfapi/describe"},"log":null},"id":"56","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919693931,"durationMillis":11,"pauseDurationMillis":0,"parentNodes":["55"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/57/wfapi/describe"},"log":null},"id":"57","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"Just
        an empty test!","startTimeMillis":1526919693942,"durationMillis":0,"pauseDurationMillis":0,"parentNodes":["56"]}],"allChildNodeIds":["53","54","55","56","57","58","59"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/63/wfapi/describe"},"log":null},"id":"63","name":"deploy","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919693967,"durationMillis":2211,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/66/wfapi/describe"},"log":null},"id":"66","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919694211,"durationMillis":8,"pauseDurationMillis":0,"parentNodes":["65"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/67/wfapi/describe"},"log":null},"id":"67","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919694219,"durationMillis":27,"pauseDurationMillis":0,"parentNodes":["66"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/68/wfapi/describe"},"log":null},"id":"68","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919694246,"durationMillis":14,"pauseDurationMillis":0,"parentNodes":["67"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/69/wfapi/describe"},"log":null},"id":"69","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919694260,"durationMillis":13,"pauseDurationMillis":0,"parentNodes":["68"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/72/wfapi/describe"},"log":null},"id":"72","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919694319,"durationMillis":15,"pauseDurationMillis":0,"parentNodes":["71"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/73/wfapi/describe"},"log":null},"id":"73","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919694334,"durationMillis":26,"pauseDurationMillis":0,"parentNodes":["72"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/74/wfapi/describe"},"log":null},"id":"74","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919694360,"durationMillis":645,"pauseDurationMillis":0,"parentNodes":["73"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/75/wfapi/describe"},"log":null},"id":"75","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919695005,"durationMillis":24,"pauseDurationMillis":0,"parentNodes":["74"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/76/wfapi/describe"},"log":null},"id":"76","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919695029,"durationMillis":16,"pauseDurationMillis":0,"parentNodes":["75"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/77/wfapi/describe"},"log":null},"id":"77","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919695045,"durationMillis":641,"pauseDurationMillis":0,"parentNodes":["76"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/78/wfapi/describe"},"log":null},"id":"78","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919695686,"durationMillis":16,"pauseDurationMillis":0,"parentNodes":["77"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/79/wfapi/describe"},"log":null},"id":"79","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919695702,"durationMillis":53,"pauseDurationMillis":0,"parentNodes":["78"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/80/wfapi/describe"},"log":null},"id":"80","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919695755,"durationMillis":367,"pauseDurationMillis":0,"parentNodes":["79"]}],"allChildNodeIds":["64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/88/wfapi/describe"},"log":null},"id":"88","name":"tag","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919696189,"durationMillis":423,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/91/wfapi/describe"},"log":null},"id":"91","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919696217,"durationMillis":17,"pauseDurationMillis":0,"parentNodes":["90"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/92/wfapi/describe"},"log":null},"id":"92","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919696234,"durationMillis":13,"pauseDurationMillis":0,"parentNodes":["91"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/93/wfapi/describe"},"log":null},"id":"93","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919696247,"durationMillis":19,"pauseDurationMillis":0,"parentNodes":["92"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/94/wfapi/describe"},"log":null},"id":"94","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919696266,"durationMillis":9,"pauseDurationMillis":0,"parentNodes":["93"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/95/wfapi/describe"},"log":null},"id":"95","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919696275,"durationMillis":9,"pauseDurationMillis":0,"parentNodes":["94"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-businessrules-pipeline/4/execution/node/96/wfapi/describe"},"log":null},"id":"96","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919696284,"durationMillis":310,"pauseDurationMillis":0,"parentNodes":["95"]}],"allChildNodeIds":["89","90","91","92","93","94","95","96","97","98"]}]}'
    creationTimestamp: null
    labels:
      buildconfig: businessrules-pipeline
      openshift.io/build-config.name: businessrules-pipeline
      openshift.io/build.start-policy: Serial
    name: businessrules-pipeline-4
    ownerReferences:
    - apiVersion: build.openshift.io/v1
      controller: true
      kind: BuildConfig
      name: businessrules-pipeline
      uid: b61012b9-5d01-11e8-bf27-000d3a189887
  spec:
    nodeSelector: {}
    output: {}
    postCommit: {}
    resources: {}
    serviceAccount: builder
    source:
      type: None
    strategy:
      jenkinsPipelineStrategy:
        jenkinsfile: |-
          // name of the resource that will be used
          def templateName = 'businessrules'
          // name of testing project
          def testingProject = 'iot-testing'
          // NOTE, the "pipeline" directive/closure from the declarative pipeline syntax needs to include, or be nested outside,
          // and "openshift" directive/closure from the OpenShift Client Plugin for Jenkins.  Otherwise, the declarative pipeline engine
          // will not be fully engaged.
          pipeline {
              agent {
                node {
                  // spin up a maven slave pod to run this build on
                  label 'maven'
                }
              }
              options {
                  // set a timeout of 20 minutes for this pipeline
                  timeout(time: 20, unit: 'MINUTES')
              }

              stages {
                  stage('preamble') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Using project: ${openshift.project()}"
                                  }
                              }
                          }
                      }
                  }
                  stage('build') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def builds = openshift.selector("bc", templateName).related('builds')
                                      builds.untilEach(1) {
                                          return (it.object().status.phase == "Complete")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('test') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Just an empty test!"
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('deploy') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def rm = openshift.selector("dc", templateName).rollout()
                                      openshift.selector("dc", templateName).related('pods').untilEach(1) {
                                          return (it.object().status.phase == "Running")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('tag') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      // if everything else succeeded, tag the ${templateName}:latest image as ${testingProject}/${templateName}:latest
                                      openshift.tag("${openshift.project()}/${templateName}:latest", "${testingProject}/${templateName}:latest")
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
              } // stages
          } // pipeline
      type: JenkinsPipeline
    triggeredBy:
    - message: Manually triggered
  status:
    config:
      name: businessrules-pipeline
    output: {}
    phase: New
- apiVersion: v1
  kind: Build
  metadata:
    annotations:
      openshift.io/build-config.name: routingservice
      openshift.io/build.number: "1"
      openshift.io/build.pod-name: routingservice-1-build
    creationTimestamp: null
    labels:
      app: routingservice
      buildconfig: routingservice
      openshift.io/build-config.name: routingservice
      openshift.io/build.start-policy: Serial
    name: routingservice-1
    ownerReferences:
    - apiVersion: build.openshift.io/v1
      controller: true
      kind: BuildConfig
      name: routingservice
      uid: 3de66d32-5471-11e8-a999-000d3a189887
  spec:
    nodeSelector: null
    output:
      pushSecret:
        name: builder-dockercfg-jm5tb
      to:
        kind: ImageStreamTag
        name: routingservice:latest
    postCommit: {}
    resources: {}
    revision:
      git:
        author:
          email: alezzandro@gmail.com
          name: Alessandro Arrichiello
        commit: 8babb145f7c16385a9e5ed9be4a58205ba2130dc
        committer:
          email: noreply@github.com
          name: GitHub
        message: 'Merge pull request #4 from valdar/master'
      type: Git
    serviceAccount: builder
    source:
      git:
        ref: master
        uri: https://github.com/alezzandro/iotgw_Routing_Service
      type: Git
    strategy:
      sourceStrategy:
        from:
          kind: DockerImage
          name: registry.access.redhat.com/jboss-fuse-6/fis-karaf-openshift@sha256:c69cd72e52e1d8d3632cd3a762b4676fe280f9692045ee6973123632af866e2a
      type: Source
    triggeredBy:
    - imageChangeBuild:
        fromRef:
          kind: ImageStreamTag
          name: fis-karaf-openshift:2.0
          namespace: openshift
        imageID: registry.access.redhat.com/jboss-fuse-6/fis-karaf-openshift@sha256:c69cd72e52e1d8d3632cd3a762b4676fe280f9692045ee6973123632af866e2a
      message: Image change
  status:
    config:
      name: routingservice
    output:
      to:
        imageDigest: sha256:a0ad043afb73edf7ee7cd1801ddae7a202eac6a36e0ed0847ecd7d9d859097c5
    outputDockerImageReference: 172.30.1.1:5000/iot-development/routingservice:latest
    phase: New
    stages:
    - durationMilliseconds: 2112
      name: FetchInputs
      startTime: 2018-05-10T16:48:03Z
      steps:
      - durationMilliseconds: 2112
        name: FetchGitSource
        startTime: 2018-05-10T16:48:03Z
    - durationMilliseconds: 17189
      name: CommitContainer
      startTime: 2018-05-10T16:50:46Z
      steps:
      - durationMilliseconds: 17189
        name: CommitContainer
        startTime: 2018-05-10T16:50:46Z
    - durationMilliseconds: 163975
      name: Assemble
      startTime: 2018-05-10T16:48:22Z
      steps:
      - durationMilliseconds: 163975
        name: AssembleBuildScripts
        startTime: 2018-05-10T16:48:22Z
    - durationMilliseconds: 44683
      name: PushImage
      startTime: 2018-05-10T16:51:07Z
      steps:
      - durationMilliseconds: 44683
        name: PushImage
        startTime: 2018-05-10T16:51:07Z
- apiVersion: v1
  kind: Build
  metadata:
    annotations:
      openshift.io/build-config.name: routingservice-pipeline
      openshift.io/build.number: "1"
      openshift.io/jenkins-blueocean-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/blue/organizations/jenkins/iot-development%2Fiot-development-routingservice-pipeline/detail/iot-development-routingservice-pipeline/1/
      openshift.io/jenkins-build-uri: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/
      openshift.io/jenkins-console-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/console
      openshift.io/jenkins-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/consoleText
      openshift.io/jenkins-status-json: '{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/wfapi/describe"},"changesets":null,"pendingInputActions":null,"nextPendingInputAction":null,"artifacts":null},"id":"1","name":"#1","status":"SUCCESS","startTimeMillis":1526919952633,"endTimeMillis":1526919952633,"durationMillis":0,"queueDurationMillis":2,"pauseDurationMillis":0,"stages":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/8/wfapi/describe"},"log":null},"id":"8","name":"preamble","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919974592,"durationMillis":2325,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/11/wfapi/describe"},"log":null},"id":"11","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"","startTimeMillis":1526919975787,"durationMillis":34,"pauseDurationMillis":0,"parentNodes":["10"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/12/wfapi/describe"},"log":null},"id":"12","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919975821,"durationMillis":9,"pauseDurationMillis":0,"parentNodes":["11"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/13/wfapi/describe"},"log":null},"id":"13","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919975830,"durationMillis":26,"pauseDurationMillis":0,"parentNodes":["12"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/14/wfapi/describe"},"log":null},"id":"14","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919975856,"durationMillis":1041,"pauseDurationMillis":0,"parentNodes":["13"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/15/wfapi/describe"},"log":null},"id":"15","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"Using
        project: iot-development","startTimeMillis":1526919976897,"durationMillis":2,"pauseDurationMillis":0,"parentNodes":["14"]}],"allChildNodeIds":["9","10","11","12","13","14","15","16","17"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/21/wfapi/describe"},"log":null},"id":"21","name":"build","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919977737,"durationMillis":6878,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/24/wfapi/describe"},"log":null},"id":"24","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919977769,"durationMillis":9,"pauseDurationMillis":0,"parentNodes":["23"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/25/wfapi/describe"},"log":null},"id":"25","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919977778,"durationMillis":139,"pauseDurationMillis":0,"parentNodes":["24"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/26/wfapi/describe"},"log":null},"id":"26","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919977917,"durationMillis":23,"pauseDurationMillis":0,"parentNodes":["25"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/27/wfapi/describe"},"log":null},"id":"27","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919977940,"durationMillis":11,"pauseDurationMillis":0,"parentNodes":["26"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/30/wfapi/describe"},"log":null},"id":"30","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919979846,"durationMillis":13,"pauseDurationMillis":0,"parentNodes":["29"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/31/wfapi/describe"},"log":null},"id":"31","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919979859,"durationMillis":18,"pauseDurationMillis":0,"parentNodes":["30"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/32/wfapi/describe"},"log":null},"id":"32","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919979877,"durationMillis":677,"pauseDurationMillis":0,"parentNodes":["31"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/33/wfapi/describe"},"log":null},"id":"33","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919980554,"durationMillis":21,"pauseDurationMillis":0,"parentNodes":["32"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/34/wfapi/describe"},"log":null},"id":"34","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919980575,"durationMillis":11,"pauseDurationMillis":0,"parentNodes":["33"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/35/wfapi/describe"},"log":null},"id":"35","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919980586,"durationMillis":630,"pauseDurationMillis":0,"parentNodes":["34"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/36/wfapi/describe"},"log":null},"id":"36","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919981216,"durationMillis":199,"pauseDurationMillis":0,"parentNodes":["35"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/37/wfapi/describe"},"log":null},"id":"37","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919981415,"durationMillis":14,"pauseDurationMillis":0,"parentNodes":["36"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/38/wfapi/describe"},"log":null},"id":"38","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919981429,"durationMillis":647,"pauseDurationMillis":0,"parentNodes":["37"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/39/wfapi/describe"},"log":null},"id":"39","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919982076,"durationMillis":22,"pauseDurationMillis":0,"parentNodes":["38"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/40/wfapi/describe"},"log":null},"id":"40","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919982098,"durationMillis":21,"pauseDurationMillis":0,"parentNodes":["39"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/41/wfapi/describe"},"log":null},"id":"41","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919982119,"durationMillis":312,"pauseDurationMillis":0,"parentNodes":["40"]}],"allChildNodeIds":["22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/49/wfapi/describe"},"log":null},"id":"49","name":"test","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919984635,"durationMillis":87,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/52/wfapi/describe"},"log":null},"id":"52","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919984671,"durationMillis":16,"pauseDurationMillis":0,"parentNodes":["51"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/53/wfapi/describe"},"log":null},"id":"53","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919984687,"durationMillis":11,"pauseDurationMillis":0,"parentNodes":["52"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/54/wfapi/describe"},"log":null},"id":"54","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"Just
        an empty test!","startTimeMillis":1526919984698,"durationMillis":1,"pauseDurationMillis":0,"parentNodes":["53"]}],"allChildNodeIds":["50","51","52","53","54","55","56"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/60/wfapi/describe"},"log":null},"id":"60","name":"deploy","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919984733,"durationMillis":1846,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/63/wfapi/describe"},"log":null},"id":"63","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919984756,"durationMillis":7,"pauseDurationMillis":0,"parentNodes":["62"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/64/wfapi/describe"},"log":null},"id":"64","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919984763,"durationMillis":27,"pauseDurationMillis":0,"parentNodes":["63"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/65/wfapi/describe"},"log":null},"id":"65","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919984790,"durationMillis":18,"pauseDurationMillis":0,"parentNodes":["64"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/66/wfapi/describe"},"log":null},"id":"66","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919984808,"durationMillis":15,"pauseDurationMillis":0,"parentNodes":["65"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/69/wfapi/describe"},"log":null},"id":"69","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919984906,"durationMillis":11,"pauseDurationMillis":0,"parentNodes":["68"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/70/wfapi/describe"},"log":null},"id":"70","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919984917,"durationMillis":11,"pauseDurationMillis":0,"parentNodes":["69"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/71/wfapi/describe"},"log":null},"id":"71","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919984928,"durationMillis":645,"pauseDurationMillis":0,"parentNodes":["70"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/72/wfapi/describe"},"log":null},"id":"72","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919985573,"durationMillis":10,"pauseDurationMillis":0,"parentNodes":["71"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/73/wfapi/describe"},"log":null},"id":"73","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919985583,"durationMillis":9,"pauseDurationMillis":0,"parentNodes":["72"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/74/wfapi/describe"},"log":null},"id":"74","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919985592,"durationMillis":619,"pauseDurationMillis":0,"parentNodes":["73"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/75/wfapi/describe"},"log":null},"id":"75","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919986211,"durationMillis":13,"pauseDurationMillis":0,"parentNodes":["74"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/76/wfapi/describe"},"log":null},"id":"76","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919986224,"durationMillis":11,"pauseDurationMillis":0,"parentNodes":["75"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/77/wfapi/describe"},"log":null},"id":"77","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919986235,"durationMillis":299,"pauseDurationMillis":0,"parentNodes":["76"]}],"allChildNodeIds":["61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/85/wfapi/describe"},"log":null},"id":"85","name":"tag","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919986589,"durationMillis":785,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/88/wfapi/describe"},"log":null},"id":"88","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919986689,"durationMillis":9,"pauseDurationMillis":0,"parentNodes":["87"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/89/wfapi/describe"},"log":null},"id":"89","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919986698,"durationMillis":13,"pauseDurationMillis":0,"parentNodes":["88"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/90/wfapi/describe"},"log":null},"id":"90","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919986711,"durationMillis":16,"pauseDurationMillis":0,"parentNodes":["89"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/91/wfapi/describe"},"log":null},"id":"91","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526919986727,"durationMillis":17,"pauseDurationMillis":0,"parentNodes":["90"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/92/wfapi/describe"},"log":null},"id":"92","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526919986744,"durationMillis":15,"pauseDurationMillis":0,"parentNodes":["91"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-routingservice-pipeline/1/execution/node/93/wfapi/describe"},"log":null},"id":"93","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526919986759,"durationMillis":601,"pauseDurationMillis":0,"parentNodes":["92"]}],"allChildNodeIds":["86","87","88","89","90","91","92","93","94","95"]}]}'
    creationTimestamp: null
    labels:
      buildconfig: routingservice-pipeline
      openshift.io/build-config.name: routingservice-pipeline
      openshift.io/build.start-policy: Serial
    name: routingservice-pipeline-1
    ownerReferences:
    - apiVersion: build.openshift.io/v1
      controller: true
      kind: BuildConfig
      name: routingservice-pipeline
      uid: 956dc043-5d13-11e8-92eb-000d3a189887
  spec:
    nodeSelector: {}
    output: {}
    postCommit: {}
    resources: {}
    serviceAccount: builder
    source:
      type: None
    strategy:
      jenkinsPipelineStrategy:
        jenkinsfile: |-
          // name of the resource that will be used
          def templateName = 'routingservice'
          // name of testing project
          def testingProject = 'iot-testing'
          // NOTE, the "pipeline" directive/closure from the declarative pipeline syntax needs to include, or be nested outside,
          // and "openshift" directive/closure from the OpenShift Client Plugin for Jenkins.  Otherwise, the declarative pipeline engine
          // will not be fully engaged.
          pipeline {
              agent {
                node {
                  // spin up a maven slave pod to run this build on
                  label 'maven'
                }
              }
              options {
                  // set a timeout of 20 minutes for this pipeline
                  timeout(time: 20, unit: 'MINUTES')
              }

              stages {
                  stage('preamble') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Using project: ${openshift.project()}"
                                  }
                              }
                          }
                      }
                  }
                  stage('build') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def builds = openshift.selector("bc", templateName).related('builds')
                                      builds.untilEach(1) {
                                          return (it.object().status.phase == "Complete")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('test') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Just an empty test!"
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('deploy') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def rm = openshift.selector("dc", templateName).rollout()
                                      openshift.selector("dc", templateName).related('pods').untilEach(1) {
                                          return (it.object().status.phase == "Running")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('tag') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      // if everything else succeeded, tag the ${templateName}:latest image as ${testingProject}/${templateName}:latest
                                      openshift.tag("${openshift.project()}/${templateName}:latest", "${testingProject}/${templateName}:latest")
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
              } // stages
          } // pipeline
      type: JenkinsPipeline
    triggeredBy:
    - message: Manually triggered
  status:
    config:
      name: routingservice-pipeline
    output: {}
    phase: New
- apiVersion: v1
  kind: Build
  metadata:
    annotations:
      openshift.io/build-config.name: software-sensor
      openshift.io/build.number: "1"
      openshift.io/build.pod-name: software-sensor-1-build
    creationTimestamp: null
    labels:
      app: software-sensor
      buildconfig: software-sensor
      openshift.io/build-config.name: software-sensor
      openshift.io/build.start-policy: Serial
    name: software-sensor-1
    ownerReferences:
    - apiVersion: build.openshift.io/v1
      controller: true
      kind: BuildConfig
      name: software-sensor
      uid: 3de69407-5471-11e8-a999-000d3a189887
  spec:
    nodeSelector: null
    output:
      pushSecret:
        name: builder-dockercfg-jm5tb
      to:
        kind: ImageStreamTag
        name: software-sensor:latest
    postCommit: {}
    resources: {}
    revision:
      git:
        author:
          email: aarrichi@redhat.com
          name: Alessandro Arrichiello
        commit: df7515d45ad1fd4f7e267e08d48bb767f461989c
        committer:
          email: aarrichi@redhat.com
          name: Alessandro Arrichiello
        message: Adding systemout
      type: Git
    serviceAccount: builder
    source:
      git:
        ref: master
        uri: https://github.com/alezzandro/iotgw_Software_Sensor
      type: Git
    strategy:
      sourceStrategy:
        from:
          kind: DockerImage
          name: registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429
      type: Source
    triggeredBy:
    - imageChangeBuild:
        fromRef:
          kind: ImageStreamTag
          name: redhat-openjdk18-openshift:1.2
          namespace: openshift
        imageID: registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429
      message: Image change
  status:
    config:
      name: software-sensor
    output:
      to:
        imageDigest: sha256:5cae52a43658e6a18d0e90a76e8c31f8fa63e95d542326b1d5838fa99aaa04a2
    outputDockerImageReference: 172.30.1.1:5000/iot-development/software-sensor:latest
    phase: New
    stages:
    - durationMilliseconds: 438
      name: FetchInputs
      startTime: 2018-05-10T16:48:27Z
      steps:
      - durationMilliseconds: 438
        name: FetchGitSource
        startTime: 2018-05-10T16:48:27Z
    - durationMilliseconds: 1062
      name: CommitContainer
      startTime: 2018-05-10T16:50:22Z
      steps:
      - durationMilliseconds: 1062
        name: CommitContainer
        startTime: 2018-05-10T16:50:22Z
    - durationMilliseconds: 28525
      name: Assemble
      startTime: 2018-05-10T16:49:55Z
      steps:
      - durationMilliseconds: 28525
        name: AssembleBuildScripts
        startTime: 2018-05-10T16:49:55Z
    - durationMilliseconds: 44023
      name: PushImage
      startTime: 2018-05-10T16:50:24Z
      steps:
      - durationMilliseconds: 44023
        name: PushImage
        startTime: 2018-05-10T16:50:24Z
- apiVersion: v1
  kind: Build
  metadata:
    annotations:
      openshift.io/build-config.name: software-sensor-pipeline
      openshift.io/build.number: "1"
      openshift.io/jenkins-blueocean-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/blue/organizations/jenkins/iot-development%2Fiot-development-software-sensor-pipeline/detail/iot-development-software-sensor-pipeline/1/
      openshift.io/jenkins-build-uri: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/
      openshift.io/jenkins-console-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/console
      openshift.io/jenkins-log-url: https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/consoleText
      openshift.io/jenkins-status-json: '{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/wfapi/describe"},"changesets":null,"pendingInputActions":null,"nextPendingInputAction":null,"artifacts":null},"id":"1","name":"#1","status":"SUCCESS","startTimeMillis":1526920118603,"endTimeMillis":1526920118603,"durationMillis":0,"queueDurationMillis":6,"pauseDurationMillis":0,"stages":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/8/wfapi/describe"},"log":null},"id":"8","name":"preamble","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920151720,"durationMillis":1900,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/11/wfapi/describe"},"log":null},"id":"11","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"","startTimeMillis":1526920152931,"durationMillis":45,"pauseDurationMillis":0,"parentNodes":["10"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/12/wfapi/describe"},"log":null},"id":"12","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920152976,"durationMillis":11,"pauseDurationMillis":0,"parentNodes":["11"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/13/wfapi/describe"},"log":null},"id":"13","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920152987,"durationMillis":15,"pauseDurationMillis":0,"parentNodes":["12"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/14/wfapi/describe"},"log":null},"id":"14","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526920153002,"durationMillis":586,"pauseDurationMillis":0,"parentNodes":["13"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/15/wfapi/describe"},"log":null},"id":"15","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"Using
        project: iot-development","startTimeMillis":1526920153588,"durationMillis":1,"pauseDurationMillis":0,"parentNodes":["14"]}],"allChildNodeIds":["9","10","11","12","13","14","15","16","17"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/21/wfapi/describe"},"log":null},"id":"21","name":"build","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920153688,"durationMillis":7116,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/24/wfapi/describe"},"log":null},"id":"24","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920153753,"durationMillis":7,"pauseDurationMillis":0,"parentNodes":["23"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/25/wfapi/describe"},"log":null},"id":"25","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920153760,"durationMillis":59,"pauseDurationMillis":0,"parentNodes":["24"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/26/wfapi/describe"},"log":null},"id":"26","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526920153819,"durationMillis":15,"pauseDurationMillis":0,"parentNodes":["25"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/27/wfapi/describe"},"log":null},"id":"27","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526920153834,"durationMillis":16,"pauseDurationMillis":0,"parentNodes":["26"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/30/wfapi/describe"},"log":null},"id":"30","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526920155649,"durationMillis":30,"pauseDurationMillis":0,"parentNodes":["29"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/31/wfapi/describe"},"log":null},"id":"31","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526920155679,"durationMillis":48,"pauseDurationMillis":0,"parentNodes":["30"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/32/wfapi/describe"},"log":null},"id":"32","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920155727,"durationMillis":485,"pauseDurationMillis":0,"parentNodes":["31"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/33/wfapi/describe"},"log":null},"id":"33","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526920156212,"durationMillis":11,"pauseDurationMillis":0,"parentNodes":["32"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/34/wfapi/describe"},"log":null},"id":"34","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526920156223,"durationMillis":14,"pauseDurationMillis":0,"parentNodes":["33"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/35/wfapi/describe"},"log":null},"id":"35","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920156237,"durationMillis":625,"pauseDurationMillis":0,"parentNodes":["34"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/36/wfapi/describe"},"log":null},"id":"36","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526920156862,"durationMillis":14,"pauseDurationMillis":0,"parentNodes":["35"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/37/wfapi/describe"},"log":null},"id":"37","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526920156876,"durationMillis":709,"pauseDurationMillis":0,"parentNodes":["36"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/38/wfapi/describe"},"log":null},"id":"38","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920157585,"durationMillis":643,"pauseDurationMillis":0,"parentNodes":["37"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/39/wfapi/describe"},"log":null},"id":"39","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526920158228,"durationMillis":24,"pauseDurationMillis":0,"parentNodes":["38"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/40/wfapi/describe"},"log":null},"id":"40","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526920158252,"durationMillis":22,"pauseDurationMillis":0,"parentNodes":["39"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/41/wfapi/describe"},"log":null},"id":"41","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920158274,"durationMillis":307,"pauseDurationMillis":0,"parentNodes":["40"]}],"allChildNodeIds":["22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/49/wfapi/describe"},"log":null},"id":"49","name":"test","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920160823,"durationMillis":85,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/52/wfapi/describe"},"log":null},"id":"52","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920160859,"durationMillis":16,"pauseDurationMillis":0,"parentNodes":["51"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/53/wfapi/describe"},"log":null},"id":"53","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920160875,"durationMillis":17,"pauseDurationMillis":0,"parentNodes":["52"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/54/wfapi/describe"},"log":null},"id":"54","name":"Print
        Message","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"Just
        an empty test!","startTimeMillis":1526920160892,"durationMillis":1,"pauseDurationMillis":0,"parentNodes":["53"]}],"allChildNodeIds":["50","51","52","53","54","55","56"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/60/wfapi/describe"},"log":null},"id":"60","name":"deploy","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920160920,"durationMillis":2173,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/63/wfapi/describe"},"log":null},"id":"63","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920160944,"durationMillis":7,"pauseDurationMillis":0,"parentNodes":["62"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/64/wfapi/describe"},"log":null},"id":"64","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920160951,"durationMillis":41,"pauseDurationMillis":0,"parentNodes":["63"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/65/wfapi/describe"},"log":null},"id":"65","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526920160992,"durationMillis":13,"pauseDurationMillis":0,"parentNodes":["64"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/66/wfapi/describe"},"log":null},"id":"66","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526920161005,"durationMillis":12,"pauseDurationMillis":0,"parentNodes":["65"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/69/wfapi/describe"},"log":null},"id":"69","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526920161062,"durationMillis":19,"pauseDurationMillis":0,"parentNodes":["68"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/70/wfapi/describe"},"log":null},"id":"70","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526920161081,"durationMillis":36,"pauseDurationMillis":0,"parentNodes":["69"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/71/wfapi/describe"},"log":null},"id":"71","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920161117,"durationMillis":649,"pauseDurationMillis":0,"parentNodes":["70"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/72/wfapi/describe"},"log":null},"id":"72","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526920161766,"durationMillis":28,"pauseDurationMillis":0,"parentNodes":["71"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/73/wfapi/describe"},"log":null},"id":"73","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526920161794,"durationMillis":61,"pauseDurationMillis":0,"parentNodes":["72"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/74/wfapi/describe"},"log":null},"id":"74","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920161855,"durationMillis":807,"pauseDurationMillis":0,"parentNodes":["73"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/75/wfapi/describe"},"log":null},"id":"75","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526920162662,"durationMillis":13,"pauseDurationMillis":0,"parentNodes":["74"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/76/wfapi/describe"},"log":null},"id":"76","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526920162675,"durationMillis":12,"pauseDurationMillis":0,"parentNodes":["75"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/77/wfapi/describe"},"log":null},"id":"77","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920162687,"durationMillis":330,"pauseDurationMillis":0,"parentNodes":["76"]}],"allChildNodeIds":["61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/85/wfapi/describe"},"log":null},"id":"85","name":"tag","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920163119,"durationMillis":820,"pauseDurationMillis":0,"stageFlowNodes":[{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/88/wfapi/describe"},"log":null},"id":"88","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920163172,"durationMillis":26,"pauseDurationMillis":0,"parentNodes":["87"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/89/wfapi/describe"},"log":null},"id":"89","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920163198,"durationMillis":42,"pauseDurationMillis":0,"parentNodes":["88"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/90/wfapi/describe"},"log":null},"id":"90","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526920163240,"durationMillis":27,"pauseDurationMillis":0,"parentNodes":["89"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/91/wfapi/describe"},"log":null},"id":"91","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/namespace","startTimeMillis":1526920163267,"durationMillis":21,"pauseDurationMillis":0,"parentNodes":["90"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/92/wfapi/describe"},"log":null},"id":"92","name":"Read
        file from workspace","execNode":"","status":"SUCCESS","error":null,"parameterDescription":"/var/run/secrets/kubernetes.io/serviceaccount/token","startTimeMillis":1526920163288,"durationMillis":24,"pauseDurationMillis":0,"parentNodes":["91"]},{"_links":{"self":{"href":"https://jenkins-iot-development.apps.52.179.125.95.nip.io/job/iot-development/job/iot-development-software-sensor-pipeline/1/execution/node/93/wfapi/describe"},"log":null},"id":"93","name":"Internal
        utility function for OpenShift DSL","execNode":"","status":"SUCCESS","error":null,"parameterDescription":null,"startTimeMillis":1526920163312,"durationMillis":611,"pauseDurationMillis":0,"parentNodes":["92"]}],"allChildNodeIds":["86","87","88","89","90","91","92","93","94","95"]}]}'
    creationTimestamp: null
    labels:
      buildconfig: software-sensor-pipeline
      openshift.io/build-config.name: software-sensor-pipeline
      openshift.io/build.start-policy: Serial
    name: software-sensor-pipeline-1
    ownerReferences:
    - apiVersion: build.openshift.io/v1
      controller: true
      kind: BuildConfig
      name: software-sensor-pipeline
      uid: 980f8c4a-5d13-11e8-92eb-000d3a189887
  spec:
    nodeSelector: {}
    output: {}
    postCommit: {}
    resources: {}
    serviceAccount: builder
    source:
      type: None
    strategy:
      jenkinsPipelineStrategy:
        jenkinsfile: |-
          // name of the resource that will be used
          def templateName = 'software-sensor'
          // name of testing project
          def testingProject = 'iot-testing'
          // NOTE, the "pipeline" directive/closure from the declarative pipeline syntax needs to include, or be nested outside,
          // and "openshift" directive/closure from the OpenShift Client Plugin for Jenkins.  Otherwise, the declarative pipeline engine
          // will not be fully engaged.
          pipeline {
              agent {
                node {
                  // spin up a maven slave pod to run this build on
                  label 'maven'
                }
              }
              options {
                  // set a timeout of 20 minutes for this pipeline
                  timeout(time: 20, unit: 'MINUTES')
              }

              stages {
                  stage('preamble') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Using project: ${openshift.project()}"
                                  }
                              }
                          }
                      }
                  }
                  stage('build') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def builds = openshift.selector("bc", templateName).related('builds')
                                      builds.untilEach(1) {
                                          return (it.object().status.phase == "Complete")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('test') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      echo "Just an empty test!"
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('deploy') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      def rm = openshift.selector("dc", templateName).rollout()
                                      openshift.selector("dc", templateName).related('pods').untilEach(1) {
                                          return (it.object().status.phase == "Running")
                                      }
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
                  stage('tag') {
                      steps {
                          script {
                              openshift.withCluster() {
                                  openshift.withProject() {
                                      // if everything else succeeded, tag the ${templateName}:latest image as ${testingProject}/${templateName}:latest
                                      openshift.tag("${openshift.project()}/${templateName}:latest", "${testingProject}/${templateName}:latest")
                                  }
                              }
                          } // script
                      } // steps
                  } // stage
              } // stages
          } // pipeline
      type: JenkinsPipeline
    triggeredBy:
    - message: Manually triggered
  status:
    config:
      name: software-sensor-pipeline
    output: {}
    phase: New
- apiVersion: v1
  kind: ImageStream
  metadata:
    annotations:
      openshift.io/generated-by: OpenShiftWebConsole
    creationTimestamp: null
    generation: 1
    labels:
      app: businessrules
    name: businessrules
  spec:
    lookupPolicy:
      local: false
    tags:
    - annotations: null
      from:
        kind: DockerImage
        name: 172.30.1.1:5000/iot-development/businessrules:latest
      generation: 1
      importPolicy: {}
      name: latest
      referencePolicy:
        type: Source
  status:
    dockerImageRepository: ""
- apiVersion: v1
  kind: ImageStream
  metadata:
    annotations:
      openshift.io/generated-by: OpenShiftWebConsole
    creationTimestamp: null
    generation: 1
    labels:
      app: routingservice
    name: routingservice
  spec:
    lookupPolicy:
      local: false
    tags:
    - annotations: null
      from:
        kind: DockerImage
        name: 172.30.1.1:5000/iot-development/routingservice:latest
      generation: 1
      importPolicy: {}
      name: latest
      referencePolicy:
        type: Source
  status:
    dockerImageRepository: ""
- apiVersion: v1
  kind: ImageStream
  metadata:
    annotations:
      openshift.io/generated-by: OpenShiftWebConsole
    creationTimestamp: null
    generation: 1
    labels:
      app: software-sensor
    name: software-sensor
  spec:
    lookupPolicy:
      local: false
    tags:
    - annotations: null
      from:
        kind: DockerImage
        name: 172.30.1.1:5000/iot-development/software-sensor:latest
      generation: 1
      importPolicy: {}
      name: latest
      referencePolicy:
        type: Source
  status:
    dockerImageRepository: ""
- apiVersion: v1
  kind: Route
  metadata:
    annotations:
      haproxy.router.openshift.io/timeout: 2m
      openshift.io/host.generated: "true"
      template.openshift.io/expose-uri: http://{.spec.host}{.spec.path}
    creationTimestamp: null
    labels:
      app: jenkins-persistent
      template: jenkins-persistent-template
    name: jenkins
  spec:
    host: jenkins-iot-development.apps.52.179.125.95.nip.io
    tls:
      insecureEdgeTerminationPolicy: Redirect
      termination: edge
    to:
      kind: Service
      name: jenkins
      weight: 100
    wildcardPolicy: None
  status:
    ingress:
    - conditions:
      - lastTransitionTime: 2018-05-21T14:07:14Z
        status: "True"
        type: Admitted
      host: jenkins-iot-development.apps.52.179.125.95.nip.io
      routerName: router
      wildcardPolicy: None
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: broker-amq
      openshift.io/deployment.name: broker-amq-1
      openshift.io/scc: restricted
    creationTimestamp: null
    generateName: broker-amq-1-
    labels:
      application: broker
      deployment: broker-amq-1
      deploymentConfig: broker-amq
      deploymentconfig: broker-amq
    ownerReferences:
    - apiVersion: v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicationController
      name: broker-amq-1
      uid: f509e4a4-5471-11e8-a999-000d3a189887
  spec:
    containers:
    - env:
      - name: AMQ_USER
        value: admin
      - name: AMQ_PASSWORD
        value: change12_me
      - name: AMQ_TRANSPORTS
        value: openwire, mqtt
      - name: AMQ_QUEUES
        value: message.to.rules, message.to.datacenter
      - name: AMQ_TOPICS
      - name: MQ_SERIALIZABLE_PACKAGES
      - name: AMQ_SPLIT
        value: "true"
      - name: AMQ_MESH_DISCOVERY_TYPE
        value: dns
      - name: AMQ_MESH_SERVICE_NAME
        value: broker-amq-mesh
      - name: AMQ_MESH_SERVICE_NAMESPACE
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.namespace
      - name: AMQ_STORAGE_USAGE_LIMIT
        value: 1 gb
      - name: AMQ_QUEUE_MEMORY_LIMIT
      image: registry.access.redhat.com/jboss-amq-6/amq63-openshift@sha256:921ba8088efd41bd9c591c7ba45ef7d67dca603a5632e5a5ea4a9c2af67617db
      imagePullPolicy: Always
      name: broker-amq
      ports:
      - containerPort: 8778
        name: jolokia
        protocol: TCP
      - containerPort: 5672
        name: amqp
        protocol: TCP
      - containerPort: 1883
        name: mqtt
        protocol: TCP
      - containerPort: 61613
        name: stomp
        protocol: TCP
      - containerPort: 61616
        name: tcp
        protocol: TCP
      readinessProbe:
        exec:
          command:
          - /bin/bash
          - -c
          - /opt/amq/bin/readinessProbe.sh
        failureThreshold: 3
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 1
      resources: {}
      securityContext:
        capabilities:
          drop:
          - KILL
          - MKNOD
          - SETGID
          - SETUID
        runAsUser: 1000110000
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /opt/amq/data
        name: broker-amq-pvol
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: default-token-p4rjr
        readOnly: true
    dnsPolicy: ClusterFirst
    imagePullSecrets:
    - name: default-dockercfg-vjsnl
    nodeName: localhost
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext:
      fsGroup: 1000110000
      seLinuxOptions:
        level: s0:c11,c0
    serviceAccount: default
    serviceAccountName: default
    terminationGracePeriodSeconds: 60
    volumes:
    - emptyDir: {}
      name: broker-amq-pvol
    - name: default-token-p4rjr
      secret:
        defaultMode: 420
        secretName: default-token-p4rjr
  status:
    phase: Pending
    qosClass: BestEffort
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: broker-drainer
      openshift.io/deployment.name: broker-drainer-1
      openshift.io/scc: restricted
    creationTimestamp: null
    generateName: broker-drainer-1-
    labels:
      application: broker
      deployment: broker-drainer-1
      deploymentConfig: broker-drainer
      deploymentconfig: broker-drainer
    ownerReferences:
    - apiVersion: v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicationController
      name: broker-drainer-1
      uid: f532f4b1-5471-11e8-a999-000d3a189887
  spec:
    containers:
    - command:
      - /opt/amq/bin/drain.sh
      env:
      - name: AMQ_USER
        value: admin
      - name: AMQ_PASSWORD
        value: change12_me
      - name: AMQ_MESH_SERVICE_NAME
        value: broker-amq-mesh
      - name: AMQ_MESH_SERVICE_NAMESPACE
        valueFrom:
          fieldRef:
            apiVersion: v1
            fieldPath: metadata.namespace
      image: registry.access.redhat.com/jboss-amq-6/amq63-openshift@sha256:921ba8088efd41bd9c591c7ba45ef7d67dca603a5632e5a5ea4a9c2af67617db
      imagePullPolicy: Always
      name: broker-drainer
      ports:
      - containerPort: 8778
        name: jolokia
        protocol: TCP
      - containerPort: 61616
        name: tcp
        protocol: TCP
      resources: {}
      securityContext:
        capabilities:
          drop:
          - KILL
          - MKNOD
          - SETGID
          - SETUID
        runAsUser: 1000110000
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /opt/amq/data
        name: broker-amq-pvol
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: default-token-p4rjr
        readOnly: true
    dnsPolicy: ClusterFirst
    imagePullSecrets:
    - name: default-dockercfg-vjsnl
    nodeName: localhost
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext:
      fsGroup: 1000110000
      seLinuxOptions:
        level: s0:c11,c0
    serviceAccount: default
    serviceAccountName: default
    terminationGracePeriodSeconds: 60
    volumes:
    - emptyDir: {}
      name: broker-amq-pvol
    - name: default-token-p4rjr
      secret:
        defaultMode: 420
        secretName: default-token-p4rjr
  status:
    phase: Pending
    qosClass: BestEffort
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      openshift.io/build.name: businessrules-1
      openshift.io/scc: privileged
    creationTimestamp: null
    labels:
      openshift.io/build.name: businessrules-1
    name: businessrules-1-build
    ownerReferences:
    - apiVersion: build.openshift.io/v1
      controller: true
      kind: Build
      name: businessrules-1
      uid: f3fe3016-5471-11e8-a999-000d3a189887
  spec:
    containers:
    - args:
      - --loglevel=0
      command:
      - openshift-sti-build
      env:
      - name: BUILD
        value: |
          {"kind":"Build","apiVersion":"v1","metadata":{"name":"businessrules-1","namespace":"iot-development","selfLink":"/apis/build.openshift.io/v1/namespaces/iot-development/builds/businessrules-1","uid":"f3fe3016-5471-11e8-a999-000d3a189887","resourceVersion":"19030","creationTimestamp":"2018-05-10T16:48:23Z","labels":{"app":"businessrules","buildconfig":"businessrules","openshift.io/build-config.name":"businessrules","openshift.io/build.start-policy":"Serial"},"annotations":{"openshift.io/build-config.name":"businessrules","openshift.io/build.number":"1"},"ownerReferences":[{"apiVersion":"build.openshift.io/v1","kind":"BuildConfig","name":"businessrules","uid":"3de6c0a2-5471-11e8-a999-000d3a189887","controller":true}]},"spec":{"serviceAccount":"builder","source":{"type":"Git","git":{"uri":"https://github.com/alezzandro/iotgw_BusinessRules_Service","ref":"master"}},"strategy":{"type":"Source","sourceStrategy":{"from":{"kind":"DockerImage","name":"registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429"}}},"output":{"to":{"kind":"DockerImage","name":"172.30.1.1:5000/iot-development/businessrules:latest"},"pushSecret":{"name":"builder-dockercfg-jm5tb"}},"resources":{},"postCommit":{},"nodeSelector":null,"triggeredBy":[{"message":"Image change","imageChangeBuild":{"imageID":"registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429","fromRef":{"kind":"ImageStreamTag","namespace":"openshift","name":"redhat-openjdk18-openshift:1.2"}}}]},"status":{"phase":"New","outputDockerImageReference":"172.30.1.1:5000/iot-development/businessrules:latest","config":{"kind":"BuildConfig","namespace":"iot-development","name":"businessrules"},"output":{}}}
      - name: SOURCE_REPOSITORY
        value: https://github.com/alezzandro/iotgw_BusinessRules_Service
      - name: SOURCE_URI
        value: https://github.com/alezzandro/iotgw_BusinessRules_Service
      - name: SOURCE_REF
        value: master
      - name: ORIGIN_VERSION
        value: v3.9.25
      - name: ALLOWED_UIDS
        value: 1-
      - name: DROP_CAPS
        value: KILL,MKNOD,SETGID,SETUID
      - name: PUSH_DOCKERCFG_PATH
        value: /var/run/secrets/openshift.io/push
      image: registry.access.redhat.com/openshift3/ose-sti-builder:v3.9.25
      imagePullPolicy: IfNotPresent
      name: sti-build
      resources: {}
      securityContext:
        privileged: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: FallbackToLogsOnError
      volumeMounts:
      - mountPath: /tmp/build
        name: buildworkdir
      - mountPath: /var/run/docker.sock
        name: docker-socket
      - mountPath: /var/run/crio/crio.sock
        name: crio-socket
      - mountPath: /var/run/secrets/openshift.io/push
        name: builder-dockercfg-jm5tb-push
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: builder-token-bbch5
        readOnly: true
    dnsPolicy: ClusterFirst
    imagePullSecrets:
    - name: builder-dockercfg-jm5tb
    initContainers:
    - args:
      - --loglevel=0
      command:
      - openshift-git-clone
      env:
      - name: BUILD
        value: |
          {"kind":"Build","apiVersion":"v1","metadata":{"name":"businessrules-1","namespace":"iot-development","selfLink":"/apis/build.openshift.io/v1/namespaces/iot-development/builds/businessrules-1","uid":"f3fe3016-5471-11e8-a999-000d3a189887","resourceVersion":"19030","creationTimestamp":"2018-05-10T16:48:23Z","labels":{"app":"businessrules","buildconfig":"businessrules","openshift.io/build-config.name":"businessrules","openshift.io/build.start-policy":"Serial"},"annotations":{"openshift.io/build-config.name":"businessrules","openshift.io/build.number":"1"},"ownerReferences":[{"apiVersion":"build.openshift.io/v1","kind":"BuildConfig","name":"businessrules","uid":"3de6c0a2-5471-11e8-a999-000d3a189887","controller":true}]},"spec":{"serviceAccount":"builder","source":{"type":"Git","git":{"uri":"https://github.com/alezzandro/iotgw_BusinessRules_Service","ref":"master"}},"strategy":{"type":"Source","sourceStrategy":{"from":{"kind":"DockerImage","name":"registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429"}}},"output":{"to":{"kind":"DockerImage","name":"172.30.1.1:5000/iot-development/businessrules:latest"},"pushSecret":{"name":"builder-dockercfg-jm5tb"}},"resources":{},"postCommit":{},"nodeSelector":null,"triggeredBy":[{"message":"Image change","imageChangeBuild":{"imageID":"registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429","fromRef":{"kind":"ImageStreamTag","namespace":"openshift","name":"redhat-openjdk18-openshift:1.2"}}}]},"status":{"phase":"New","outputDockerImageReference":"172.30.1.1:5000/iot-development/businessrules:latest","config":{"kind":"BuildConfig","namespace":"iot-development","name":"businessrules"},"output":{}}}
      - name: SOURCE_REPOSITORY
        value: https://github.com/alezzandro/iotgw_BusinessRules_Service
      - name: SOURCE_URI
        value: https://github.com/alezzandro/iotgw_BusinessRules_Service
      - name: SOURCE_REF
        value: master
      - name: ORIGIN_VERSION
        value: v3.9.25
      - name: ALLOWED_UIDS
        value: 1-
      - name: DROP_CAPS
        value: KILL,MKNOD,SETGID,SETUID
      image: registry.access.redhat.com/openshift3/ose-sti-builder:v3.9.25
      imagePullPolicy: IfNotPresent
      name: git-clone
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: FallbackToLogsOnError
      volumeMounts:
      - mountPath: /tmp/build
        name: buildworkdir
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: builder-token-bbch5
        readOnly: true
    - args:
      - --loglevel=0
      command:
      - openshift-manage-dockerfile
      env:
      - name: BUILD
        value: |
          {"kind":"Build","apiVersion":"v1","metadata":{"name":"businessrules-1","namespace":"iot-development","selfLink":"/apis/build.openshift.io/v1/namespaces/iot-development/builds/businessrules-1","uid":"f3fe3016-5471-11e8-a999-000d3a189887","resourceVersion":"19030","creationTimestamp":"2018-05-10T16:48:23Z","labels":{"app":"businessrules","buildconfig":"businessrules","openshift.io/build-config.name":"businessrules","openshift.io/build.start-policy":"Serial"},"annotations":{"openshift.io/build-config.name":"businessrules","openshift.io/build.number":"1"},"ownerReferences":[{"apiVersion":"build.openshift.io/v1","kind":"BuildConfig","name":"businessrules","uid":"3de6c0a2-5471-11e8-a999-000d3a189887","controller":true}]},"spec":{"serviceAccount":"builder","source":{"type":"Git","git":{"uri":"https://github.com/alezzandro/iotgw_BusinessRules_Service","ref":"master"}},"strategy":{"type":"Source","sourceStrategy":{"from":{"kind":"DockerImage","name":"registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429"}}},"output":{"to":{"kind":"DockerImage","name":"172.30.1.1:5000/iot-development/businessrules:latest"},"pushSecret":{"name":"builder-dockercfg-jm5tb"}},"resources":{},"postCommit":{},"nodeSelector":null,"triggeredBy":[{"message":"Image change","imageChangeBuild":{"imageID":"registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429","fromRef":{"kind":"ImageStreamTag","namespace":"openshift","name":"redhat-openjdk18-openshift:1.2"}}}]},"status":{"phase":"New","outputDockerImageReference":"172.30.1.1:5000/iot-development/businessrules:latest","config":{"kind":"BuildConfig","namespace":"iot-development","name":"businessrules"},"output":{}}}
      - name: SOURCE_REPOSITORY
        value: https://github.com/alezzandro/iotgw_BusinessRules_Service
      - name: SOURCE_URI
        value: https://github.com/alezzandro/iotgw_BusinessRules_Service
      - name: SOURCE_REF
        value: master
      - name: ORIGIN_VERSION
        value: v3.9.25
      - name: ALLOWED_UIDS
        value: 1-
      - name: DROP_CAPS
        value: KILL,MKNOD,SETGID,SETUID
      image: registry.access.redhat.com/openshift3/ose-sti-builder:v3.9.25
      imagePullPolicy: IfNotPresent
      name: manage-dockerfile
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: FallbackToLogsOnError
      volumeMounts:
      - mountPath: /tmp/build
        name: buildworkdir
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: builder-token-bbch5
        readOnly: true
    nodeName: localhost
    restartPolicy: Never
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: builder
    serviceAccountName: builder
    terminationGracePeriodSeconds: 30
    volumes:
    - emptyDir: {}
      name: buildworkdir
    - hostPath:
        path: /var/run/docker.sock
        type: ""
      name: docker-socket
    - hostPath:
        path: /var/run/crio/crio.sock
        type: ""
      name: crio-socket
    - name: builder-dockercfg-jm5tb-push
      secret:
        defaultMode: 384
        secretName: builder-dockercfg-jm5tb
    - name: builder-token-bbch5
      secret:
        defaultMode: 420
        secretName: builder-token-bbch5
  status:
    phase: Pending
    qosClass: BestEffort
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      openshift.io/build.name: businessrules-2
      openshift.io/scc: privileged
    creationTimestamp: null
    labels:
      openshift.io/build.name: businessrules-2
    name: businessrules-2-build
    ownerReferences:
    - apiVersion: build.openshift.io/v1
      controller: true
      kind: Build
      name: businessrules-2
      uid: 1fec7d2f-5518-11e8-99c0-000d3a189887
  spec:
    containers:
    - args:
      - --loglevel=0
      command:
      - openshift-sti-build
      env:
      - name: BUILD
        value: |
          {"kind":"Build","apiVersion":"v1","metadata":{"name":"businessrules-2","namespace":"iot-development","selfLink":"/apis/build.openshift.io/v1/namespaces/iot-development/builds/businessrules-2","uid":"1fec7d2f-5518-11e8-99c0-000d3a189887","resourceVersion":"58060","creationTimestamp":"2018-05-11T12:37:53Z","labels":{"app":"businessrules","buildconfig":"businessrules","openshift.io/build-config.name":"businessrules","openshift.io/build.start-policy":"Serial"},"annotations":{"openshift.io/build-config.name":"businessrules","openshift.io/build.number":"2"},"ownerReferences":[{"apiVersion":"build.openshift.io/v1","kind":"BuildConfig","name":"businessrules","uid":"3de6c0a2-5471-11e8-a999-000d3a189887","controller":true}]},"spec":{"serviceAccount":"builder","source":{"type":"Git","git":{"uri":"https://github.com/alezzandro/iotgw_BusinessRules_Service","ref":"master"}},"revision":{"type":"Git","git":{"commit":"ecdf621e0930aa687bb1b4a68f9658955dc42170","author":{"name":"Alessandro Arrichiello","email":"aarrichi@redhat.com"},"committer":{"name":"Alessandro Arrichiello","email":"aarrichi@redhat.com"},"message":"Edit decision table"}},"strategy":{"type":"Source","sourceStrategy":{"from":{"kind":"DockerImage","name":"registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429"}}},"output":{"to":{"kind":"DockerImage","name":"172.30.1.1:5000/iot-development/businessrules:latest"},"pushSecret":{"name":"builder-dockercfg-jm5tb"}},"resources":{},"postCommit":{},"nodeSelector":null,"triggeredBy":[{"message":"GitHub WebHook","githubWebHook":{"revision":{"type":"Git","git":{"commit":"ecdf621e0930aa687bb1b4a68f9658955dc42170","author":{"name":"Alessandro Arrichiello","email":"aarrichi@redhat.com"},"committer":{"name":"Alessandro Arrichiello","email":"aarrichi@redhat.com"},"message":"Edit decision table"}},"secret":"\u003csecret\u003e"}}]},"status":{"phase":"New","outputDockerImageReference":"172.30.1.1:5000/iot-development/businessrules:latest","config":{"kind":"BuildConfig","namespace":"iot-development","name":"businessrules"},"output":{}}}
      - name: SOURCE_REPOSITORY
        value: https://github.com/alezzandro/iotgw_BusinessRules_Service
      - name: SOURCE_URI
        value: https://github.com/alezzandro/iotgw_BusinessRules_Service
      - name: SOURCE_REF
        value: master
      - name: ORIGIN_VERSION
        value: v3.9.25
      - name: ALLOWED_UIDS
        value: 1-
      - name: DROP_CAPS
        value: KILL,MKNOD,SETGID,SETUID
      - name: PUSH_DOCKERCFG_PATH
        value: /var/run/secrets/openshift.io/push
      image: registry.access.redhat.com/openshift3/ose-sti-builder:v3.9.25
      imagePullPolicy: IfNotPresent
      name: sti-build
      resources: {}
      securityContext:
        privileged: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: FallbackToLogsOnError
      volumeMounts:
      - mountPath: /tmp/build
        name: buildworkdir
      - mountPath: /var/run/docker.sock
        name: docker-socket
      - mountPath: /var/run/crio/crio.sock
        name: crio-socket
      - mountPath: /var/run/secrets/openshift.io/push
        name: builder-dockercfg-jm5tb-push
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: builder-token-bbch5
        readOnly: true
    dnsPolicy: ClusterFirst
    imagePullSecrets:
    - name: builder-dockercfg-jm5tb
    initContainers:
    - args:
      - --loglevel=0
      command:
      - openshift-git-clone
      env:
      - name: BUILD
        value: |
          {"kind":"Build","apiVersion":"v1","metadata":{"name":"businessrules-2","namespace":"iot-development","selfLink":"/apis/build.openshift.io/v1/namespaces/iot-development/builds/businessrules-2","uid":"1fec7d2f-5518-11e8-99c0-000d3a189887","resourceVersion":"58060","creationTimestamp":"2018-05-11T12:37:53Z","labels":{"app":"businessrules","buildconfig":"businessrules","openshift.io/build-config.name":"businessrules","openshift.io/build.start-policy":"Serial"},"annotations":{"openshift.io/build-config.name":"businessrules","openshift.io/build.number":"2"},"ownerReferences":[{"apiVersion":"build.openshift.io/v1","kind":"BuildConfig","name":"businessrules","uid":"3de6c0a2-5471-11e8-a999-000d3a189887","controller":true}]},"spec":{"serviceAccount":"builder","source":{"type":"Git","git":{"uri":"https://github.com/alezzandro/iotgw_BusinessRules_Service","ref":"master"}},"revision":{"type":"Git","git":{"commit":"ecdf621e0930aa687bb1b4a68f9658955dc42170","author":{"name":"Alessandro Arrichiello","email":"aarrichi@redhat.com"},"committer":{"name":"Alessandro Arrichiello","email":"aarrichi@redhat.com"},"message":"Edit decision table"}},"strategy":{"type":"Source","sourceStrategy":{"from":{"kind":"DockerImage","name":"registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429"}}},"output":{"to":{"kind":"DockerImage","name":"172.30.1.1:5000/iot-development/businessrules:latest"},"pushSecret":{"name":"builder-dockercfg-jm5tb"}},"resources":{},"postCommit":{},"nodeSelector":null,"triggeredBy":[{"message":"GitHub WebHook","githubWebHook":{"revision":{"type":"Git","git":{"commit":"ecdf621e0930aa687bb1b4a68f9658955dc42170","author":{"name":"Alessandro Arrichiello","email":"aarrichi@redhat.com"},"committer":{"name":"Alessandro Arrichiello","email":"aarrichi@redhat.com"},"message":"Edit decision table"}},"secret":"\u003csecret\u003e"}}]},"status":{"phase":"New","outputDockerImageReference":"172.30.1.1:5000/iot-development/businessrules:latest","config":{"kind":"BuildConfig","namespace":"iot-development","name":"businessrules"},"output":{}}}
      - name: SOURCE_REPOSITORY
        value: https://github.com/alezzandro/iotgw_BusinessRules_Service
      - name: SOURCE_URI
        value: https://github.com/alezzandro/iotgw_BusinessRules_Service
      - name: SOURCE_REF
        value: master
      - name: ORIGIN_VERSION
        value: v3.9.25
      - name: ALLOWED_UIDS
        value: 1-
      - name: DROP_CAPS
        value: KILL,MKNOD,SETGID,SETUID
      image: registry.access.redhat.com/openshift3/ose-sti-builder:v3.9.25
      imagePullPolicy: IfNotPresent
      name: git-clone
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: FallbackToLogsOnError
      volumeMounts:
      - mountPath: /tmp/build
        name: buildworkdir
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: builder-token-bbch5
        readOnly: true
    - args:
      - --loglevel=0
      command:
      - openshift-manage-dockerfile
      env:
      - name: BUILD
        value: |
          {"kind":"Build","apiVersion":"v1","metadata":{"name":"businessrules-2","namespace":"iot-development","selfLink":"/apis/build.openshift.io/v1/namespaces/iot-development/builds/businessrules-2","uid":"1fec7d2f-5518-11e8-99c0-000d3a189887","resourceVersion":"58060","creationTimestamp":"2018-05-11T12:37:53Z","labels":{"app":"businessrules","buildconfig":"businessrules","openshift.io/build-config.name":"businessrules","openshift.io/build.start-policy":"Serial"},"annotations":{"openshift.io/build-config.name":"businessrules","openshift.io/build.number":"2"},"ownerReferences":[{"apiVersion":"build.openshift.io/v1","kind":"BuildConfig","name":"businessrules","uid":"3de6c0a2-5471-11e8-a999-000d3a189887","controller":true}]},"spec":{"serviceAccount":"builder","source":{"type":"Git","git":{"uri":"https://github.com/alezzandro/iotgw_BusinessRules_Service","ref":"master"}},"revision":{"type":"Git","git":{"commit":"ecdf621e0930aa687bb1b4a68f9658955dc42170","author":{"name":"Alessandro Arrichiello","email":"aarrichi@redhat.com"},"committer":{"name":"Alessandro Arrichiello","email":"aarrichi@redhat.com"},"message":"Edit decision table"}},"strategy":{"type":"Source","sourceStrategy":{"from":{"kind":"DockerImage","name":"registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429"}}},"output":{"to":{"kind":"DockerImage","name":"172.30.1.1:5000/iot-development/businessrules:latest"},"pushSecret":{"name":"builder-dockercfg-jm5tb"}},"resources":{},"postCommit":{},"nodeSelector":null,"triggeredBy":[{"message":"GitHub WebHook","githubWebHook":{"revision":{"type":"Git","git":{"commit":"ecdf621e0930aa687bb1b4a68f9658955dc42170","author":{"name":"Alessandro Arrichiello","email":"aarrichi@redhat.com"},"committer":{"name":"Alessandro Arrichiello","email":"aarrichi@redhat.com"},"message":"Edit decision table"}},"secret":"\u003csecret\u003e"}}]},"status":{"phase":"New","outputDockerImageReference":"172.30.1.1:5000/iot-development/businessrules:latest","config":{"kind":"BuildConfig","namespace":"iot-development","name":"businessrules"},"output":{}}}
      - name: SOURCE_REPOSITORY
        value: https://github.com/alezzandro/iotgw_BusinessRules_Service
      - name: SOURCE_URI
        value: https://github.com/alezzandro/iotgw_BusinessRules_Service
      - name: SOURCE_REF
        value: master
      - name: ORIGIN_VERSION
        value: v3.9.25
      - name: ALLOWED_UIDS
        value: 1-
      - name: DROP_CAPS
        value: KILL,MKNOD,SETGID,SETUID
      image: registry.access.redhat.com/openshift3/ose-sti-builder:v3.9.25
      imagePullPolicy: IfNotPresent
      name: manage-dockerfile
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: FallbackToLogsOnError
      volumeMounts:
      - mountPath: /tmp/build
        name: buildworkdir
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: builder-token-bbch5
        readOnly: true
    nodeName: localhost
    restartPolicy: Never
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: builder
    serviceAccountName: builder
    terminationGracePeriodSeconds: 30
    volumes:
    - emptyDir: {}
      name: buildworkdir
    - hostPath:
        path: /var/run/docker.sock
        type: ""
      name: docker-socket
    - hostPath:
        path: /var/run/crio/crio.sock
        type: ""
      name: crio-socket
    - name: builder-dockercfg-jm5tb-push
      secret:
        defaultMode: 384
        secretName: builder-dockercfg-jm5tb
    - name: builder-token-bbch5
      secret:
        defaultMode: 420
        secretName: builder-token-bbch5
  status:
    phase: Pending
    qosClass: BestEffort
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      openshift.io/deployment-config.latest-version: "2"
      openshift.io/deployment-config.name: businessrules
      openshift.io/deployment.name: businessrules-2
      openshift.io/scc: restricted
    creationTimestamp: null
    generateName: businessrules-2-
    labels:
      app: businessrules
      deployment: businessrules-2
      deploymentconfig: businessrules
    ownerReferences:
    - apiVersion: v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicationController
      name: businessrules-2
      uid: 6e77019a-5518-11e8-99c0-000d3a189887
  spec:
    containers:
    - env:
      - name: JAVA_APP_JAR
        value: rules-jar-with-dependencies.jar
      - name: SOURCE_AMQ_BROKER
        value: tcp://broker-amq-mesh:61616
      - name: SOURCE_QUEUE
        value: message.to.rules
      - name: SOURCE_BROKER_ADMIN_UID
        value: admin
      - name: SOURCE_BROKER_ADMIN_PASSWD
        value: change12_me
      - name: TARGET_AMQ_BROKER
        value: tcp://broker-amq-mesh:61616
      - name: TARGET_QUEUE
        value: message.to.datacenter
      - name: TARGET_BROKER_ADMIN_UID
        value: admin
      - name: TARGET_BROKER_ADMIN_PASSWD
        value: change12_me
      image: 172.30.1.1:5000/iot-development/businessrules@sha256:96c3d3b5481b28093127353a36104451ded3f57702a0e969f121c1f2dd4bbcb8
      imagePullPolicy: Always
      name: businessrules
      ports:
      - containerPort: 8080
        protocol: TCP
      - containerPort: 8443
        protocol: TCP
      - containerPort: 8778
        protocol: TCP
      resources: {}
      securityContext:
        capabilities:
          drop:
          - KILL
          - MKNOD
          - SETGID
          - SETUID
        runAsUser: 1000110000
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: default-token-p4rjr
        readOnly: true
    dnsPolicy: ClusterFirst
    imagePullSecrets:
    - name: default-dockercfg-vjsnl
    nodeName: localhost
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext:
      fsGroup: 1000110000
      seLinuxOptions:
        level: s0:c11,c0
    serviceAccount: default
    serviceAccountName: default
    terminationGracePeriodSeconds: 30
    volumes:
    - name: default-token-p4rjr
      secret:
        defaultMode: 420
        secretName: default-token-p4rjr
  status:
    phase: Pending
    qosClass: BestEffort
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: jenkins
      openshift.io/deployment.name: jenkins-1
      openshift.io/scc: restricted
    creationTimestamp: null
    generateName: jenkins-1-
    labels:
      deployment: jenkins-1
      deploymentconfig: jenkins
      name: jenkins
    ownerReferences:
    - apiVersion: v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicationController
      name: jenkins-1
      uid: 435766f9-5d00-11e8-bf27-000d3a189887
  spec:
    containers:
    - env:
      - name: OPENSHIFT_ENABLE_OAUTH
        value: "true"
      - name: OPENSHIFT_ENABLE_REDIRECT_PROMPT
        value: "true"
      - name: KUBERNETES_MASTER
        value: https://kubernetes.default:443
      - name: KUBERNETES_TRUST_CERTIFICATES
        value: "true"
      - name: JENKINS_SERVICE_NAME
        value: jenkins
      - name: JNLP_SERVICE_NAME
        value: jenkins-jnlp
      image: registry.access.redhat.com/openshift3/jenkins-2-rhel7@sha256:9d9fd30f8cdf87c89b96e01e8b17786cd0643929b0621b719ab6b1353c8a5722
      imagePullPolicy: IfNotPresent
      livenessProbe:
        failureThreshold: 2
        httpGet:
          path: /login
          port: 8080
          scheme: HTTP
        initialDelaySeconds: 420
        periodSeconds: 360
        successThreshold: 1
        timeoutSeconds: 240
      name: jenkins
      readinessProbe:
        failureThreshold: 3
        httpGet:
          path: /login
          port: 8080
          scheme: HTTP
        initialDelaySeconds: 3
        periodSeconds: 10
        successThreshold: 1
        timeoutSeconds: 240
      resources:
        limits:
          memory: 512Mi
        requests:
          memory: 512Mi
      securityContext:
        capabilities:
          drop:
          - KILL
          - MKNOD
          - SETGID
          - SETUID
        privileged: false
        runAsUser: 1000110000
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/lib/jenkins
        name: jenkins-data
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: jenkins-token-hdpsj
        readOnly: true
    dnsPolicy: ClusterFirst
    imagePullSecrets:
    - name: jenkins-dockercfg-fhr9s
    nodeName: localhost
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext:
      fsGroup: 1000110000
      seLinuxOptions:
        level: s0:c11,c0
    serviceAccount: jenkins
    serviceAccountName: jenkins
    terminationGracePeriodSeconds: 30
    tolerations:
    - effect: NoSchedule
      key: node.kubernetes.io/memory-pressure
      operator: Exists
    volumes:
    - name: jenkins-data
      persistentVolumeClaim:
        claimName: jenkins
    - name: jenkins-token-hdpsj
      secret:
        defaultMode: 420
        secretName: jenkins-token-hdpsj
  status:
    phase: Pending
    qosClass: Burstable
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      openshift.io/scc: restricted
    creationTimestamp: null
    labels:
      jenkins: slave
      jenkins/maven: "true"
    name: maven-dwrd0
  spec:
    containers:
    - args:
      - 562ef44d57060a272c19cb59d5aa6b48a83dc15ee17683ffd1d4b71199cc300c
      - maven-dwrd0
      env:
      - name: JENKINS_SECRET
        value: 562ef44d57060a272c19cb59d5aa6b48a83dc15ee17683ffd1d4b71199cc300c
      - name: JENKINS_TUNNEL
        value: 172.30.36.19:50000
      - name: JENKINS_NAME
        value: maven-dwrd0
      - name: JENKINS_URL
        value: http://172.30.210.61:80/
      - name: HOME
        value: /tmp
      image: registry.access.redhat.com/openshift3/jenkins-slave-maven-rhel7:v3.9
      imagePullPolicy: Always
      name: jnlp
      resources: {}
      securityContext:
        capabilities:
          drop:
          - KILL
          - MKNOD
          - SETGID
          - SETUID
        privileged: false
        runAsUser: 1000110000
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /tmp
        name: workspace-volume
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: jenkins-token-hdpsj
        readOnly: true
      workingDir: /tmp
    dnsPolicy: ClusterFirst
    imagePullSecrets:
    - name: jenkins-dockercfg-fhr9s
    nodeName: localhost
    restartPolicy: Never
    schedulerName: default-scheduler
    securityContext:
      fsGroup: 1000110000
      seLinuxOptions:
        level: s0:c11,c0
    serviceAccount: jenkins
    serviceAccountName: jenkins
    terminationGracePeriodSeconds: 30
    volumes:
    - emptyDir: {}
      name: workspace-volume
    - name: jenkins-token-hdpsj
      secret:
        defaultMode: 420
        secretName: jenkins-token-hdpsj
  status:
    phase: Pending
    qosClass: BestEffort
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      openshift.io/build.name: routingservice-1
      openshift.io/scc: privileged
    creationTimestamp: null
    labels:
      openshift.io/build.name: routingservice-1
    name: routingservice-1-build
    ownerReferences:
    - apiVersion: build.openshift.io/v1
      controller: true
      kind: Build
      name: routingservice-1
      uid: e4ed812e-5471-11e8-a999-000d3a189887
  spec:
    containers:
    - args:
      - --loglevel=0
      command:
      - openshift-sti-build
      env:
      - name: BUILD
        value: |
          {"kind":"Build","apiVersion":"v1","metadata":{"name":"routingservice-1","namespace":"iot-development","selfLink":"/apis/build.openshift.io/v1/namespaces/iot-development/builds/routingservice-1","uid":"e4ed812e-5471-11e8-a999-000d3a189887","resourceVersion":"18868","creationTimestamp":"2018-05-10T16:47:58Z","labels":{"app":"routingservice","buildconfig":"routingservice","openshift.io/build-config.name":"routingservice","openshift.io/build.start-policy":"Serial"},"annotations":{"openshift.io/build-config.name":"routingservice","openshift.io/build.number":"1"},"ownerReferences":[{"apiVersion":"build.openshift.io/v1","kind":"BuildConfig","name":"routingservice","uid":"3de66d32-5471-11e8-a999-000d3a189887","controller":true}]},"spec":{"serviceAccount":"builder","source":{"type":"Git","git":{"uri":"https://github.com/alezzandro/iotgw_Routing_Service","ref":"master"}},"strategy":{"type":"Source","sourceStrategy":{"from":{"kind":"DockerImage","name":"registry.access.redhat.com/jboss-fuse-6/fis-karaf-openshift@sha256:c69cd72e52e1d8d3632cd3a762b4676fe280f9692045ee6973123632af866e2a"}}},"output":{"to":{"kind":"DockerImage","name":"172.30.1.1:5000/iot-development/routingservice:latest"},"pushSecret":{"name":"builder-dockercfg-jm5tb"}},"resources":{},"postCommit":{},"nodeSelector":null,"triggeredBy":[{"message":"Image change","imageChangeBuild":{"imageID":"registry.access.redhat.com/jboss-fuse-6/fis-karaf-openshift@sha256:c69cd72e52e1d8d3632cd3a762b4676fe280f9692045ee6973123632af866e2a","fromRef":{"kind":"ImageStreamTag","namespace":"openshift","name":"fis-karaf-openshift:2.0"}}}]},"status":{"phase":"New","outputDockerImageReference":"172.30.1.1:5000/iot-development/routingservice:latest","config":{"kind":"BuildConfig","namespace":"iot-development","name":"routingservice"},"output":{}}}
      - name: SOURCE_REPOSITORY
        value: https://github.com/alezzandro/iotgw_Routing_Service
      - name: SOURCE_URI
        value: https://github.com/alezzandro/iotgw_Routing_Service
      - name: SOURCE_REF
        value: master
      - name: ORIGIN_VERSION
        value: v3.9.25
      - name: ALLOWED_UIDS
        value: 1-
      - name: DROP_CAPS
        value: KILL,MKNOD,SETGID,SETUID
      - name: PUSH_DOCKERCFG_PATH
        value: /var/run/secrets/openshift.io/push
      image: registry.access.redhat.com/openshift3/ose-sti-builder:v3.9.25
      imagePullPolicy: IfNotPresent
      name: sti-build
      resources: {}
      securityContext:
        privileged: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: FallbackToLogsOnError
      volumeMounts:
      - mountPath: /tmp/build
        name: buildworkdir
      - mountPath: /var/run/docker.sock
        name: docker-socket
      - mountPath: /var/run/crio/crio.sock
        name: crio-socket
      - mountPath: /var/run/secrets/openshift.io/push
        name: builder-dockercfg-jm5tb-push
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: builder-token-bbch5
        readOnly: true
    dnsPolicy: ClusterFirst
    imagePullSecrets:
    - name: builder-dockercfg-jm5tb
    initContainers:
    - args:
      - --loglevel=0
      command:
      - openshift-git-clone
      env:
      - name: BUILD
        value: |
          {"kind":"Build","apiVersion":"v1","metadata":{"name":"routingservice-1","namespace":"iot-development","selfLink":"/apis/build.openshift.io/v1/namespaces/iot-development/builds/routingservice-1","uid":"e4ed812e-5471-11e8-a999-000d3a189887","resourceVersion":"18868","creationTimestamp":"2018-05-10T16:47:58Z","labels":{"app":"routingservice","buildconfig":"routingservice","openshift.io/build-config.name":"routingservice","openshift.io/build.start-policy":"Serial"},"annotations":{"openshift.io/build-config.name":"routingservice","openshift.io/build.number":"1"},"ownerReferences":[{"apiVersion":"build.openshift.io/v1","kind":"BuildConfig","name":"routingservice","uid":"3de66d32-5471-11e8-a999-000d3a189887","controller":true}]},"spec":{"serviceAccount":"builder","source":{"type":"Git","git":{"uri":"https://github.com/alezzandro/iotgw_Routing_Service","ref":"master"}},"strategy":{"type":"Source","sourceStrategy":{"from":{"kind":"DockerImage","name":"registry.access.redhat.com/jboss-fuse-6/fis-karaf-openshift@sha256:c69cd72e52e1d8d3632cd3a762b4676fe280f9692045ee6973123632af866e2a"}}},"output":{"to":{"kind":"DockerImage","name":"172.30.1.1:5000/iot-development/routingservice:latest"},"pushSecret":{"name":"builder-dockercfg-jm5tb"}},"resources":{},"postCommit":{},"nodeSelector":null,"triggeredBy":[{"message":"Image change","imageChangeBuild":{"imageID":"registry.access.redhat.com/jboss-fuse-6/fis-karaf-openshift@sha256:c69cd72e52e1d8d3632cd3a762b4676fe280f9692045ee6973123632af866e2a","fromRef":{"kind":"ImageStreamTag","namespace":"openshift","name":"fis-karaf-openshift:2.0"}}}]},"status":{"phase":"New","outputDockerImageReference":"172.30.1.1:5000/iot-development/routingservice:latest","config":{"kind":"BuildConfig","namespace":"iot-development","name":"routingservice"},"output":{}}}
      - name: SOURCE_REPOSITORY
        value: https://github.com/alezzandro/iotgw_Routing_Service
      - name: SOURCE_URI
        value: https://github.com/alezzandro/iotgw_Routing_Service
      - name: SOURCE_REF
        value: master
      - name: ORIGIN_VERSION
        value: v3.9.25
      - name: ALLOWED_UIDS
        value: 1-
      - name: DROP_CAPS
        value: KILL,MKNOD,SETGID,SETUID
      image: registry.access.redhat.com/openshift3/ose-sti-builder:v3.9.25
      imagePullPolicy: IfNotPresent
      name: git-clone
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: FallbackToLogsOnError
      volumeMounts:
      - mountPath: /tmp/build
        name: buildworkdir
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: builder-token-bbch5
        readOnly: true
    - args:
      - --loglevel=0
      command:
      - openshift-manage-dockerfile
      env:
      - name: BUILD
        value: |
          {"kind":"Build","apiVersion":"v1","metadata":{"name":"routingservice-1","namespace":"iot-development","selfLink":"/apis/build.openshift.io/v1/namespaces/iot-development/builds/routingservice-1","uid":"e4ed812e-5471-11e8-a999-000d3a189887","resourceVersion":"18868","creationTimestamp":"2018-05-10T16:47:58Z","labels":{"app":"routingservice","buildconfig":"routingservice","openshift.io/build-config.name":"routingservice","openshift.io/build.start-policy":"Serial"},"annotations":{"openshift.io/build-config.name":"routingservice","openshift.io/build.number":"1"},"ownerReferences":[{"apiVersion":"build.openshift.io/v1","kind":"BuildConfig","name":"routingservice","uid":"3de66d32-5471-11e8-a999-000d3a189887","controller":true}]},"spec":{"serviceAccount":"builder","source":{"type":"Git","git":{"uri":"https://github.com/alezzandro/iotgw_Routing_Service","ref":"master"}},"strategy":{"type":"Source","sourceStrategy":{"from":{"kind":"DockerImage","name":"registry.access.redhat.com/jboss-fuse-6/fis-karaf-openshift@sha256:c69cd72e52e1d8d3632cd3a762b4676fe280f9692045ee6973123632af866e2a"}}},"output":{"to":{"kind":"DockerImage","name":"172.30.1.1:5000/iot-development/routingservice:latest"},"pushSecret":{"name":"builder-dockercfg-jm5tb"}},"resources":{},"postCommit":{},"nodeSelector":null,"triggeredBy":[{"message":"Image change","imageChangeBuild":{"imageID":"registry.access.redhat.com/jboss-fuse-6/fis-karaf-openshift@sha256:c69cd72e52e1d8d3632cd3a762b4676fe280f9692045ee6973123632af866e2a","fromRef":{"kind":"ImageStreamTag","namespace":"openshift","name":"fis-karaf-openshift:2.0"}}}]},"status":{"phase":"New","outputDockerImageReference":"172.30.1.1:5000/iot-development/routingservice:latest","config":{"kind":"BuildConfig","namespace":"iot-development","name":"routingservice"},"output":{}}}
      - name: SOURCE_REPOSITORY
        value: https://github.com/alezzandro/iotgw_Routing_Service
      - name: SOURCE_URI
        value: https://github.com/alezzandro/iotgw_Routing_Service
      - name: SOURCE_REF
        value: master
      - name: ORIGIN_VERSION
        value: v3.9.25
      - name: ALLOWED_UIDS
        value: 1-
      - name: DROP_CAPS
        value: KILL,MKNOD,SETGID,SETUID
      image: registry.access.redhat.com/openshift3/ose-sti-builder:v3.9.25
      imagePullPolicy: IfNotPresent
      name: manage-dockerfile
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: FallbackToLogsOnError
      volumeMounts:
      - mountPath: /tmp/build
        name: buildworkdir
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: builder-token-bbch5
        readOnly: true
    nodeName: localhost
    restartPolicy: Never
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: builder
    serviceAccountName: builder
    terminationGracePeriodSeconds: 30
    volumes:
    - emptyDir: {}
      name: buildworkdir
    - hostPath:
        path: /var/run/docker.sock
        type: ""
      name: docker-socket
    - hostPath:
        path: /var/run/crio/crio.sock
        type: ""
      name: crio-socket
    - name: builder-dockercfg-jm5tb-push
      secret:
        defaultMode: 384
        secretName: builder-dockercfg-jm5tb
    - name: builder-token-bbch5
      secret:
        defaultMode: 420
        secretName: builder-token-bbch5
  status:
    phase: Pending
    qosClass: BestEffort
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: routingservice
      openshift.io/deployment.name: routingservice-1
      openshift.io/scc: restricted
    creationTimestamp: null
    generateName: routingservice-1-
    labels:
      app: routingservice
      deployment: routingservice-1
      deploymentconfig: routingservice
    ownerReferences:
    - apiVersion: v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicationController
      name: routingservice-1
      uid: 7036cc46-5472-11e8-a999-000d3a189887
  spec:
    containers:
    - env:
      - name: SOURCE_AMQ_BROKER
        value: tcp://broker-amq-mesh:61616
      - name: SOURCE_BROKER_ADMIN_UID
        value: admin
      - name: SOURCE_BROKER_ADMIN_PASSWD
        value: change12_me
      - name: BROKER_AMQ_MQTT_HOST
        value: broker-amq-mqtt
      image: 172.30.1.1:5000/iot-development/routingservice@sha256:a0ad043afb73edf7ee7cd1801ddae7a202eac6a36e0ed0847ecd7d9d859097c5
      imagePullPolicy: Always
      name: routingservice
      ports:
      - containerPort: 8778
        protocol: TCP
      resources: {}
      securityContext:
        capabilities:
          drop:
          - KILL
          - MKNOD
          - SETGID
          - SETUID
        runAsUser: 1000110000
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: default-token-p4rjr
        readOnly: true
    dnsPolicy: ClusterFirst
    imagePullSecrets:
    - name: default-dockercfg-vjsnl
    nodeName: localhost
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext:
      fsGroup: 1000110000
      seLinuxOptions:
        level: s0:c11,c0
    serviceAccount: default
    serviceAccountName: default
    terminationGracePeriodSeconds: 30
    volumes:
    - name: default-token-p4rjr
      secret:
        defaultMode: 420
        secretName: default-token-p4rjr
  status:
    phase: Pending
    qosClass: BestEffort
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      openshift.io/build.name: software-sensor-1
      openshift.io/scc: privileged
    creationTimestamp: null
    labels:
      openshift.io/build.name: software-sensor-1
    name: software-sensor-1-build
    ownerReferences:
    - apiVersion: build.openshift.io/v1
      controller: true
      kind: Build
      name: software-sensor-1
      uid: f3f90d5b-5471-11e8-a999-000d3a189887
  spec:
    containers:
    - args:
      - --loglevel=0
      command:
      - openshift-sti-build
      env:
      - name: BUILD
        value: |
          {"kind":"Build","apiVersion":"v1","metadata":{"name":"software-sensor-1","namespace":"iot-development","selfLink":"/apis/build.openshift.io/v1/namespaces/iot-development/builds/software-sensor-1","uid":"f3f90d5b-5471-11e8-a999-000d3a189887","resourceVersion":"19028","creationTimestamp":"2018-05-10T16:48:23Z","labels":{"app":"software-sensor","buildconfig":"software-sensor","openshift.io/build-config.name":"software-sensor","openshift.io/build.start-policy":"Serial"},"annotations":{"openshift.io/build-config.name":"software-sensor","openshift.io/build.number":"1"},"ownerReferences":[{"apiVersion":"build.openshift.io/v1","kind":"BuildConfig","name":"software-sensor","uid":"3de69407-5471-11e8-a999-000d3a189887","controller":true}]},"spec":{"serviceAccount":"builder","source":{"type":"Git","git":{"uri":"https://github.com/alezzandro/iotgw_Software_Sensor","ref":"master"}},"strategy":{"type":"Source","sourceStrategy":{"from":{"kind":"DockerImage","name":"registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429"}}},"output":{"to":{"kind":"DockerImage","name":"172.30.1.1:5000/iot-development/software-sensor:latest"},"pushSecret":{"name":"builder-dockercfg-jm5tb"}},"resources":{},"postCommit":{},"nodeSelector":null,"triggeredBy":[{"message":"Image change","imageChangeBuild":{"imageID":"registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429","fromRef":{"kind":"ImageStreamTag","namespace":"openshift","name":"redhat-openjdk18-openshift:1.2"}}}]},"status":{"phase":"New","outputDockerImageReference":"172.30.1.1:5000/iot-development/software-sensor:latest","config":{"kind":"BuildConfig","namespace":"iot-development","name":"software-sensor"},"output":{}}}
      - name: SOURCE_REPOSITORY
        value: https://github.com/alezzandro/iotgw_Software_Sensor
      - name: SOURCE_URI
        value: https://github.com/alezzandro/iotgw_Software_Sensor
      - name: SOURCE_REF
        value: master
      - name: ORIGIN_VERSION
        value: v3.9.25
      - name: ALLOWED_UIDS
        value: 1-
      - name: DROP_CAPS
        value: KILL,MKNOD,SETGID,SETUID
      - name: PUSH_DOCKERCFG_PATH
        value: /var/run/secrets/openshift.io/push
      image: registry.access.redhat.com/openshift3/ose-sti-builder:v3.9.25
      imagePullPolicy: IfNotPresent
      name: sti-build
      resources: {}
      securityContext:
        privileged: true
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: FallbackToLogsOnError
      volumeMounts:
      - mountPath: /tmp/build
        name: buildworkdir
      - mountPath: /var/run/docker.sock
        name: docker-socket
      - mountPath: /var/run/crio/crio.sock
        name: crio-socket
      - mountPath: /var/run/secrets/openshift.io/push
        name: builder-dockercfg-jm5tb-push
        readOnly: true
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: builder-token-bbch5
        readOnly: true
    dnsPolicy: ClusterFirst
    imagePullSecrets:
    - name: builder-dockercfg-jm5tb
    initContainers:
    - args:
      - --loglevel=0
      command:
      - openshift-git-clone
      env:
      - name: BUILD
        value: |
          {"kind":"Build","apiVersion":"v1","metadata":{"name":"software-sensor-1","namespace":"iot-development","selfLink":"/apis/build.openshift.io/v1/namespaces/iot-development/builds/software-sensor-1","uid":"f3f90d5b-5471-11e8-a999-000d3a189887","resourceVersion":"19028","creationTimestamp":"2018-05-10T16:48:23Z","labels":{"app":"software-sensor","buildconfig":"software-sensor","openshift.io/build-config.name":"software-sensor","openshift.io/build.start-policy":"Serial"},"annotations":{"openshift.io/build-config.name":"software-sensor","openshift.io/build.number":"1"},"ownerReferences":[{"apiVersion":"build.openshift.io/v1","kind":"BuildConfig","name":"software-sensor","uid":"3de69407-5471-11e8-a999-000d3a189887","controller":true}]},"spec":{"serviceAccount":"builder","source":{"type":"Git","git":{"uri":"https://github.com/alezzandro/iotgw_Software_Sensor","ref":"master"}},"strategy":{"type":"Source","sourceStrategy":{"from":{"kind":"DockerImage","name":"registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429"}}},"output":{"to":{"kind":"DockerImage","name":"172.30.1.1:5000/iot-development/software-sensor:latest"},"pushSecret":{"name":"builder-dockercfg-jm5tb"}},"resources":{},"postCommit":{},"nodeSelector":null,"triggeredBy":[{"message":"Image change","imageChangeBuild":{"imageID":"registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429","fromRef":{"kind":"ImageStreamTag","namespace":"openshift","name":"redhat-openjdk18-openshift:1.2"}}}]},"status":{"phase":"New","outputDockerImageReference":"172.30.1.1:5000/iot-development/software-sensor:latest","config":{"kind":"BuildConfig","namespace":"iot-development","name":"software-sensor"},"output":{}}}
      - name: SOURCE_REPOSITORY
        value: https://github.com/alezzandro/iotgw_Software_Sensor
      - name: SOURCE_URI
        value: https://github.com/alezzandro/iotgw_Software_Sensor
      - name: SOURCE_REF
        value: master
      - name: ORIGIN_VERSION
        value: v3.9.25
      - name: ALLOWED_UIDS
        value: 1-
      - name: DROP_CAPS
        value: KILL,MKNOD,SETGID,SETUID
      image: registry.access.redhat.com/openshift3/ose-sti-builder:v3.9.25
      imagePullPolicy: IfNotPresent
      name: git-clone
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: FallbackToLogsOnError
      volumeMounts:
      - mountPath: /tmp/build
        name: buildworkdir
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: builder-token-bbch5
        readOnly: true
    - args:
      - --loglevel=0
      command:
      - openshift-manage-dockerfile
      env:
      - name: BUILD
        value: |
          {"kind":"Build","apiVersion":"v1","metadata":{"name":"software-sensor-1","namespace":"iot-development","selfLink":"/apis/build.openshift.io/v1/namespaces/iot-development/builds/software-sensor-1","uid":"f3f90d5b-5471-11e8-a999-000d3a189887","resourceVersion":"19028","creationTimestamp":"2018-05-10T16:48:23Z","labels":{"app":"software-sensor","buildconfig":"software-sensor","openshift.io/build-config.name":"software-sensor","openshift.io/build.start-policy":"Serial"},"annotations":{"openshift.io/build-config.name":"software-sensor","openshift.io/build.number":"1"},"ownerReferences":[{"apiVersion":"build.openshift.io/v1","kind":"BuildConfig","name":"software-sensor","uid":"3de69407-5471-11e8-a999-000d3a189887","controller":true}]},"spec":{"serviceAccount":"builder","source":{"type":"Git","git":{"uri":"https://github.com/alezzandro/iotgw_Software_Sensor","ref":"master"}},"strategy":{"type":"Source","sourceStrategy":{"from":{"kind":"DockerImage","name":"registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429"}}},"output":{"to":{"kind":"DockerImage","name":"172.30.1.1:5000/iot-development/software-sensor:latest"},"pushSecret":{"name":"builder-dockercfg-jm5tb"}},"resources":{},"postCommit":{},"nodeSelector":null,"triggeredBy":[{"message":"Image change","imageChangeBuild":{"imageID":"registry.access.redhat.com/redhat-openjdk-18/openjdk18-openshift@sha256:afe904fd986c4147d1905813eb1a2f5bc3480ecad5b70b4ccfec384271777429","fromRef":{"kind":"ImageStreamTag","namespace":"openshift","name":"redhat-openjdk18-openshift:1.2"}}}]},"status":{"phase":"New","outputDockerImageReference":"172.30.1.1:5000/iot-development/software-sensor:latest","config":{"kind":"BuildConfig","namespace":"iot-development","name":"software-sensor"},"output":{}}}
      - name: SOURCE_REPOSITORY
        value: https://github.com/alezzandro/iotgw_Software_Sensor
      - name: SOURCE_URI
        value: https://github.com/alezzandro/iotgw_Software_Sensor
      - name: SOURCE_REF
        value: master
      - name: ORIGIN_VERSION
        value: v3.9.25
      - name: ALLOWED_UIDS
        value: 1-
      - name: DROP_CAPS
        value: KILL,MKNOD,SETGID,SETUID
      image: registry.access.redhat.com/openshift3/ose-sti-builder:v3.9.25
      imagePullPolicy: IfNotPresent
      name: manage-dockerfile
      resources: {}
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: FallbackToLogsOnError
      volumeMounts:
      - mountPath: /tmp/build
        name: buildworkdir
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: builder-token-bbch5
        readOnly: true
    nodeName: localhost
    restartPolicy: Never
    schedulerName: default-scheduler
    securityContext: {}
    serviceAccount: builder
    serviceAccountName: builder
    terminationGracePeriodSeconds: 30
    volumes:
    - emptyDir: {}
      name: buildworkdir
    - hostPath:
        path: /var/run/docker.sock
        type: ""
      name: docker-socket
    - hostPath:
        path: /var/run/crio/crio.sock
        type: ""
      name: crio-socket
    - name: builder-dockercfg-jm5tb-push
      secret:
        defaultMode: 384
        secretName: builder-dockercfg-jm5tb
    - name: builder-token-bbch5
      secret:
        defaultMode: 420
        secretName: builder-token-bbch5
  status:
    phase: Pending
    qosClass: BestEffort
- apiVersion: v1
  kind: Pod
  metadata:
    annotations:
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: software-sensor
      openshift.io/deployment.name: software-sensor-1
      openshift.io/scc: restricted
    creationTimestamp: null
    generateName: software-sensor-1-
    labels:
      app: software-sensor
      deployment: software-sensor-1
      deploymentconfig: software-sensor
    ownerReferences:
    - apiVersion: v1
      blockOwnerDeletion: true
      controller: true
      kind: ReplicationController
      name: software-sensor-1
      uid: 560d5caa-5472-11e8-a999-000d3a189887
  spec:
    containers:
    - env:
      - name: deviceType
        value: temperature
      - name: deviceID
        value: "4711"
      - name: initialValue
        value: "70"
      - name: count
        value: "1000"
      - name: waitTime
        value: "1"
      - name: receiverURL
        value: broker-amq-mqtt
      - name: brokerUID
        value: admin
      - name: brokerPassword
        value: change12_me
      - name: highWater
        value: "800"
      - name: lowWater
        value: "200"
      - name: JAVA_OPTIONS
        value: -DhighWater=800 -DlowWater=200 -DbrokerUID=admin -DbrokerPassword=change12_me
          -DreceiverURL=broker-amq-mqtt -DdeviceType=temperature -DdeviceID=4711 -DinitialValue=70
          -Dcount=1000 -DwaitTime=1
      - name: JAVA_APP_JAR
        value: softwareSensor-jar-with-dependencies.jar
      image: 172.30.1.1:5000/iot-development/software-sensor@sha256:5cae52a43658e6a18d0e90a76e8c31f8fa63e95d542326b1d5838fa99aaa04a2
      imagePullPolicy: Always
      name: software-sensor
      ports:
      - containerPort: 8080
        protocol: TCP
      - containerPort: 8443
        protocol: TCP
      - containerPort: 8778
        protocol: TCP
      resources: {}
      securityContext:
        capabilities:
          drop:
          - KILL
          - MKNOD
          - SETGID
          - SETUID
        runAsUser: 1000110000
      terminationMessagePath: /dev/termination-log
      terminationMessagePolicy: File
      volumeMounts:
      - mountPath: /var/run/secrets/kubernetes.io/serviceaccount
        name: default-token-p4rjr
        readOnly: true
    dnsPolicy: ClusterFirst
    imagePullSecrets:
    - name: default-dockercfg-vjsnl
    nodeName: localhost
    restartPolicy: Always
    schedulerName: default-scheduler
    securityContext:
      fsGroup: 1000110000
      seLinuxOptions:
        level: s0:c11,c0
    serviceAccount: default
    serviceAccountName: default
    terminationGracePeriodSeconds: 30
    volumes:
    - name: default-token-p4rjr
      secret:
        defaultMode: 420
        secretName: default-token-p4rjr
  status:
    phase: Pending
    qosClass: BestEffort
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2018-05-10 16:49:53 +0000 UTC
      openshift.io/deployer-pod.created-at: 2018-05-10 16:48:25 +0000 UTC
      openshift.io/deployer-pod.name: broker-amq-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: broker-amq
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"v1","metadata":{"name":"broker-amq","namespace":"iot-development","selfLink":"/apis/apps.openshift.io/v1/namespaces/iot-development/deploymentconfigs/broker-amq","uid":"3de22765-5471-11e8-a999-000d3a189887","resourceVersion":"19068","generation":2,"creationTimestamp":"2018-05-10T16:43:18Z","labels":{"app":"amq63-persistent","application":"broker","template":"amq63-persistent","xpaas":"1.4.8"}},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":0},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["broker-amq"],"from":{"kind":"ImageStreamTag","namespace":"openshift","name":"jboss-amq-63:1.3"},"lastTriggeredImage":"registry.access.redhat.com/jboss-amq-6/amq63-openshift@sha256:921ba8088efd41bd9c591c7ba45ef7d67dca603a5632e5a5ea4a9c2af67617db"}},{"type":"ConfigChange"}],"replicas":1,"test":false,"selector":{"deploymentConfig":"broker-amq"},"template":{"metadata":{"name":"broker-amq","creationTimestamp":null,"labels":{"application":"broker","deploymentConfig":"broker-amq"}},"spec":{"volumes":[{"name":"broker-amq-pvol","emptyDir":{}}],"containers":[{"name":"broker-amq","image":"registry.access.redhat.com/jboss-amq-6/amq63-openshift@sha256:921ba8088efd41bd9c591c7ba45ef7d67dca603a5632e5a5ea4a9c2af67617db","ports":[{"name":"jolokia","containerPort":8778,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"},{"name":"mqtt","containerPort":1883,"protocol":"TCP"},{"name":"stomp","containerPort":61613,"protocol":"TCP"},{"name":"tcp","containerPort":61616,"protocol":"TCP"}],"env":[{"name":"AMQ_USER","value":"admin"},{"name":"AMQ_PASSWORD","value":"change12_me"},{"name":"AMQ_TRANSPORTS","value":"openwire, mqtt"},{"name":"AMQ_QUEUES","value":"message.to.rules, message.to.datacenter"},{"name":"AMQ_TOPICS"},{"name":"MQ_SERIALIZABLE_PACKAGES"},{"name":"AMQ_SPLIT","value":"true"},{"name":"AMQ_MESH_DISCOVERY_TYPE","value":"dns"},{"name":"AMQ_MESH_SERVICE_NAME","value":"broker-amq-mesh"},{"name":"AMQ_MESH_SERVICE_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"AMQ_STORAGE_USAGE_LIMIT","value":"1 gb"},{"name":"AMQ_QUEUE_MEMORY_LIMIT"}],"resources":{},"volumeMounts":[{"name":"broker-amq-pvol","mountPath":"/opt/amq/data"}],"readinessProbe":{"exec":{"command":["/bin/bash","-c","/opt/amq/bin/readinessProbe.sh"]},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":60,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2018-05-10T16:43:18Z","lastTransitionTime":"2018-05-10T16:43:18Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: null
    generation: 1
    labels:
      app: amq63-persistent
      application: broker
      openshift.io/deployment-config.name: broker-amq
      template: amq63-persistent
      xpaas: 1.4.8
    name: broker-amq-1
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: broker-amq
      uid: 3de22765-5471-11e8-a999-000d3a189887
  spec:
    replicas: 1
    selector:
      deployment: broker-amq-1
      deploymentConfig: broker-amq
      deploymentconfig: broker-amq
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: broker-amq
          openshift.io/deployment.name: broker-amq-1
        creationTimestamp: null
        labels:
          application: broker
          deployment: broker-amq-1
          deploymentConfig: broker-amq
          deploymentconfig: broker-amq
      spec:
        containers:
        - env:
          - name: AMQ_USER
            value: admin
          - name: AMQ_PASSWORD
            value: change12_me
          - name: AMQ_TRANSPORTS
            value: openwire, mqtt
          - name: AMQ_QUEUES
            value: message.to.rules, message.to.datacenter
          - name: AMQ_TOPICS
          - name: MQ_SERIALIZABLE_PACKAGES
          - name: AMQ_SPLIT
            value: "true"
          - name: AMQ_MESH_DISCOVERY_TYPE
            value: dns
          - name: AMQ_MESH_SERVICE_NAME
            value: broker-amq-mesh
          - name: AMQ_MESH_SERVICE_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          - name: AMQ_STORAGE_USAGE_LIMIT
            value: 1 gb
          - name: AMQ_QUEUE_MEMORY_LIMIT
          image: registry.access.redhat.com/jboss-amq-6/amq63-openshift@sha256:921ba8088efd41bd9c591c7ba45ef7d67dca603a5632e5a5ea4a9c2af67617db
          imagePullPolicy: Always
          name: broker-amq
          ports:
          - containerPort: 8778
            name: jolokia
            protocol: TCP
          - containerPort: 5672
            name: amqp
            protocol: TCP
          - containerPort: 1883
            name: mqtt
            protocol: TCP
          - containerPort: 61613
            name: stomp
            protocol: TCP
          - containerPort: 61616
            name: tcp
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - /bin/bash
              - -c
              - /opt/amq/bin/readinessProbe.sh
            failureThreshold: 3
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /opt/amq/data
            name: broker-amq-pvol
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 60
        volumes:
        - emptyDir: {}
          name: broker-amq-pvol
  status:
    replicas: 0
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2018-05-10 16:49:11 +0000 UTC
      openshift.io/deployer-pod.created-at: 2018-05-10 16:48:25 +0000 UTC
      openshift.io/deployer-pod.name: broker-drainer-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: broker-drainer
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"v1","metadata":{"name":"broker-drainer","namespace":"iot-development","selfLink":"/apis/apps.openshift.io/v1/namespaces/iot-development/deploymentconfigs/broker-drainer","uid":"3de280ad-5471-11e8-a999-000d3a189887","resourceVersion":"19074","generation":2,"creationTimestamp":"2018-05-10T16:43:18Z","labels":{"app":"amq63-persistent","application":"broker","template":"amq63-persistent","xpaas":"1.4.8"}},"spec":{"strategy":{"type":"Recreate","recreateParams":{"timeoutSeconds":600},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["broker-drainer"],"from":{"kind":"ImageStreamTag","namespace":"openshift","name":"jboss-amq-63:1.3"},"lastTriggeredImage":"registry.access.redhat.com/jboss-amq-6/amq63-openshift@sha256:921ba8088efd41bd9c591c7ba45ef7d67dca603a5632e5a5ea4a9c2af67617db"}},{"type":"ConfigChange"}],"replicas":1,"test":false,"selector":{"deploymentConfig":"broker-drainer"},"template":{"metadata":{"name":"broker-drainer","creationTimestamp":null,"labels":{"application":"broker","deploymentConfig":"broker-drainer"}},"spec":{"volumes":[{"name":"broker-amq-pvol","emptyDir":{}}],"containers":[{"name":"broker-drainer","image":"registry.access.redhat.com/jboss-amq-6/amq63-openshift@sha256:921ba8088efd41bd9c591c7ba45ef7d67dca603a5632e5a5ea4a9c2af67617db","command":["/opt/amq/bin/drain.sh"],"ports":[{"name":"jolokia","containerPort":8778,"protocol":"TCP"},{"name":"tcp","containerPort":61616,"protocol":"TCP"}],"env":[{"name":"AMQ_USER","value":"admin"},{"name":"AMQ_PASSWORD","value":"change12_me"},{"name":"AMQ_MESH_SERVICE_NAME","value":"broker-amq-mesh"},{"name":"AMQ_MESH_SERVICE_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}}],"resources":{},"volumeMounts":[{"name":"broker-amq-pvol","mountPath":"/opt/amq/data"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":60,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2018-05-10T16:43:18Z","lastTransitionTime":"2018-05-10T16:43:18Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: null
    generation: 1
    labels:
      app: amq63-persistent
      application: broker
      openshift.io/deployment-config.name: broker-drainer
      template: amq63-persistent
      xpaas: 1.4.8
    name: broker-drainer-1
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: broker-drainer
      uid: 3de280ad-5471-11e8-a999-000d3a189887
  spec:
    replicas: 1
    selector:
      deployment: broker-drainer-1
      deploymentConfig: broker-drainer
      deploymentconfig: broker-drainer
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: broker-drainer
          openshift.io/deployment.name: broker-drainer-1
        creationTimestamp: null
        labels:
          application: broker
          deployment: broker-drainer-1
          deploymentConfig: broker-drainer
          deploymentconfig: broker-drainer
      spec:
        containers:
        - command:
          - /opt/amq/bin/drain.sh
          env:
          - name: AMQ_USER
            value: admin
          - name: AMQ_PASSWORD
            value: change12_me
          - name: AMQ_MESH_SERVICE_NAME
            value: broker-amq-mesh
          - name: AMQ_MESH_SERVICE_NAMESPACE
            valueFrom:
              fieldRef:
                apiVersion: v1
                fieldPath: metadata.namespace
          image: registry.access.redhat.com/jboss-amq-6/amq63-openshift@sha256:921ba8088efd41bd9c591c7ba45ef7d67dca603a5632e5a5ea4a9c2af67617db
          imagePullPolicy: Always
          name: broker-drainer
          ports:
          - containerPort: 8778
            name: jolokia
            protocol: TCP
          - containerPort: 61616
            name: tcp
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /opt/amq/data
            name: broker-amq-pvol
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 60
        volumes:
        - emptyDir: {}
          name: broker-amq-pvol
  status:
    replicas: 0
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      kubectl.kubernetes.io/original-replicas: "1"
      openshift.io/deployer-pod.completed-at: 2018-05-10 16:53:03 +0000 UTC
      openshift.io/deployer-pod.created-at: 2018-05-10 16:52:59 +0000 UTC
      openshift.io/deployer-pod.name: businessrules-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: businessrules
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"v1","metadata":{"name":"businessrules","namespace":"iot-development","selfLink":"/apis/apps.openshift.io/v1/namespaces/iot-development/deploymentconfigs/businessrules","uid":"3de2b44e-5471-11e8-a999-000d3a189887","resourceVersion":"19893","generation":2,"creationTimestamp":"2018-05-10T16:43:18Z","labels":{"app":"businessrules"},"annotations":{"openshift.io/generated-by":"OpenShiftWebConsole"}},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["businessrules"],"from":{"kind":"ImageStreamTag","namespace":"iot-development","name":"businessrules:latest"},"lastTriggeredImage":"172.30.1.1:5000/iot-development/businessrules@sha256:7cbb14ec9de68c836574aa0355f422fd61d8fff642640ba1a235fa0e3fb9c1a5"}},{"type":"ConfigChange"}],"replicas":1,"test":false,"selector":{"deploymentconfig":"businessrules"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"businessrules","deploymentconfig":"businessrules"}},"spec":{"containers":[{"name":"businessrules","image":"172.30.1.1:5000/iot-development/businessrules@sha256:7cbb14ec9de68c836574aa0355f422fd61d8fff642640ba1a235fa0e3fb9c1a5","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8443,"protocol":"TCP"},{"containerPort":8778,"protocol":"TCP"}],"env":[{"name":"JAVA_APP_JAR","value":"rules-jar-with-dependencies.jar"},{"name":"SOURCE_AMQ_BROKER","value":"tcp://broker-amq-mesh:61616"},{"name":"SOURCE_QUEUE","value":"message.to.rules"},{"name":"SOURCE_BROKER_ADMIN_UID","value":"admin"},{"name":"SOURCE_BROKER_ADMIN_PASSWD","value":"change12_me"},{"name":"TARGET_AMQ_BROKER","value":"tcp://broker-amq-mesh:61616"},{"name":"TARGET_QUEUE","value":"message.to.datacenter"},{"name":"TARGET_BROKER_ADMIN_UID","value":"admin"},{"name":"TARGET_BROKER_ADMIN_PASSWD","value":"change12_me"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2018-05-10T16:43:18Z","lastTransitionTime":"2018-05-10T16:43:18Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: null
    generation: 1
    labels:
      app: businessrules
      openshift.io/deployment-config.name: businessrules
    name: businessrules-1
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: businessrules
      uid: 3de2b44e-5471-11e8-a999-000d3a189887
  spec:
    replicas: 0
    selector:
      deployment: businessrules-1
      deploymentconfig: businessrules
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: businessrules
          openshift.io/deployment.name: businessrules-1
        creationTimestamp: null
        labels:
          app: businessrules
          deployment: businessrules-1
          deploymentconfig: businessrules
      spec:
        containers:
        - env:
          - name: JAVA_APP_JAR
            value: rules-jar-with-dependencies.jar
          - name: SOURCE_AMQ_BROKER
            value: tcp://broker-amq-mesh:61616
          - name: SOURCE_QUEUE
            value: message.to.rules
          - name: SOURCE_BROKER_ADMIN_UID
            value: admin
          - name: SOURCE_BROKER_ADMIN_PASSWD
            value: change12_me
          - name: TARGET_AMQ_BROKER
            value: tcp://broker-amq-mesh:61616
          - name: TARGET_QUEUE
            value: message.to.datacenter
          - name: TARGET_BROKER_ADMIN_UID
            value: admin
          - name: TARGET_BROKER_ADMIN_PASSWD
            value: change12_me
          image: 172.30.1.1:5000/iot-development/businessrules@sha256:7cbb14ec9de68c836574aa0355f422fd61d8fff642640ba1a235fa0e3fb9c1a5
          imagePullPolicy: Always
          name: businessrules
          ports:
          - containerPort: 8080
            protocol: TCP
          - containerPort: 8443
            protocol: TCP
          - containerPort: 8778
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
  status:
    replicas: 0
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2018-05-11 12:40:23 +0000 UTC
      openshift.io/deployer-pod.created-at: 2018-05-11 12:40:05 +0000 UTC
      openshift.io/deployer-pod.name: businessrules-2-deploy
      openshift.io/deployment-config.latest-version: "2"
      openshift.io/deployment-config.name: businessrules
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: ""
      openshift.io/deployment.status-reason: image change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"v1","metadata":{"name":"businessrules","namespace":"iot-development","selfLink":"/apis/apps.openshift.io/v1/namespaces/iot-development/deploymentconfigs/businessrules","uid":"3de2b44e-5471-11e8-a999-000d3a189887","resourceVersion":"58315","generation":3,"creationTimestamp":"2018-05-10T16:43:18Z","labels":{"app":"businessrules"},"annotations":{"openshift.io/generated-by":"OpenShiftWebConsole"}},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["businessrules"],"from":{"kind":"ImageStreamTag","namespace":"iot-development","name":"businessrules:latest"},"lastTriggeredImage":"172.30.1.1:5000/iot-development/businessrules@sha256:96c3d3b5481b28093127353a36104451ded3f57702a0e969f121c1f2dd4bbcb8"}},{"type":"ConfigChange"}],"replicas":1,"test":false,"selector":{"deploymentconfig":"businessrules"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"businessrules","deploymentconfig":"businessrules"}},"spec":{"containers":[{"name":"businessrules","image":"172.30.1.1:5000/iot-development/businessrules@sha256:96c3d3b5481b28093127353a36104451ded3f57702a0e969f121c1f2dd4bbcb8","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8443,"protocol":"TCP"},{"containerPort":8778,"protocol":"TCP"}],"env":[{"name":"JAVA_APP_JAR","value":"rules-jar-with-dependencies.jar"},{"name":"SOURCE_AMQ_BROKER","value":"tcp://broker-amq-mesh:61616"},{"name":"SOURCE_QUEUE","value":"message.to.rules"},{"name":"SOURCE_BROKER_ADMIN_UID","value":"admin"},{"name":"SOURCE_BROKER_ADMIN_PASSWD","value":"change12_me"},{"name":"TARGET_AMQ_BROKER","value":"tcp://broker-amq-mesh:61616"},{"name":"TARGET_QUEUE","value":"message.to.datacenter"},{"name":"TARGET_BROKER_ADMIN_UID","value":"admin"},{"name":"TARGET_BROKER_ADMIN_PASSWD","value":"change12_me"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":2,"observedGeneration":2,"replicas":1,"updatedReplicas":1,"availableReplicas":1,"unavailableReplicas":0,"details":{"message":"image change","causes":[{"type":"ImageChange","imageTrigger":{"from":{"kind":"DockerImage","name":"172.30.1.1:5000/iot-development/businessrules@sha256:96c3d3b5481b28093127353a36104451ded3f57702a0e969f121c1f2dd4bbcb8"}}}]},"conditions":[{"type":"Progressing","status":"True","lastUpdateTime":"2018-05-10T16:53:04Z","lastTransitionTime":"2018-05-10T16:53:04Z","reason":"NewReplicationControllerAvailable","message":"replication controller \"businessrules-1\" successfully rolled out"},{"type":"Available","status":"True","lastUpdateTime":"2018-05-11T11:53:11Z","lastTransitionTime":"2018-05-11T11:53:11Z","message":"Deployment config has minimum availability."}],"readyReplicas":1}}
    creationTimestamp: null
    generation: 1
    labels:
      app: businessrules
      openshift.io/deployment-config.name: businessrules
    name: businessrules-2
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: businessrules
      uid: 3de2b44e-5471-11e8-a999-000d3a189887
  spec:
    replicas: 1
    selector:
      deployment: businessrules-2
      deploymentconfig: businessrules
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "2"
          openshift.io/deployment-config.name: businessrules
          openshift.io/deployment.name: businessrules-2
        creationTimestamp: null
        labels:
          app: businessrules
          deployment: businessrules-2
          deploymentconfig: businessrules
      spec:
        containers:
        - env:
          - name: JAVA_APP_JAR
            value: rules-jar-with-dependencies.jar
          - name: SOURCE_AMQ_BROKER
            value: tcp://broker-amq-mesh:61616
          - name: SOURCE_QUEUE
            value: message.to.rules
          - name: SOURCE_BROKER_ADMIN_UID
            value: admin
          - name: SOURCE_BROKER_ADMIN_PASSWD
            value: change12_me
          - name: TARGET_AMQ_BROKER
            value: tcp://broker-amq-mesh:61616
          - name: TARGET_QUEUE
            value: message.to.datacenter
          - name: TARGET_BROKER_ADMIN_UID
            value: admin
          - name: TARGET_BROKER_ADMIN_PASSWD
            value: change12_me
          image: 172.30.1.1:5000/iot-development/businessrules@sha256:96c3d3b5481b28093127353a36104451ded3f57702a0e969f121c1f2dd4bbcb8
          imagePullPolicy: Always
          name: businessrules
          ports:
          - containerPort: 8080
            protocol: TCP
          - containerPort: 8443
            protocol: TCP
          - containerPort: 8778
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
  status:
    replicas: 0
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2018-05-21 14:09:03 +0000 UTC
      openshift.io/deployer-pod.created-at: 2018-05-21 14:07:14 +0000 UTC
      openshift.io/deployer-pod.name: jenkins-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: jenkins
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"v1","metadata":{"name":"jenkins","namespace":"iot-development","selfLink":"/apis/apps.openshift.io/v1/namespaces/iot-development/deploymentconfigs/jenkins","uid":"433c7df4-5d00-11e8-bf27-000d3a189887","resourceVersion":"113061","generation":2,"creationTimestamp":"2018-05-21T14:07:14Z","labels":{"app":"jenkins-persistent","template":"jenkins-persistent-template"},"annotations":{"template.alpha.openshift.io/wait-for-ready":"true"}},"spec":{"strategy":{"type":"Recreate","recreateParams":{"timeoutSeconds":600},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["jenkins"],"from":{"kind":"ImageStreamTag","namespace":"openshift","name":"jenkins:2"},"lastTriggeredImage":"registry.access.redhat.com/openshift3/jenkins-2-rhel7@sha256:9d9fd30f8cdf87c89b96e01e8b17786cd0643929b0621b719ab6b1353c8a5722"}},{"type":"ConfigChange"}],"replicas":1,"test":false,"selector":{"name":"jenkins"},"template":{"metadata":{"creationTimestamp":null,"labels":{"name":"jenkins"}},"spec":{"volumes":[{"name":"jenkins-data","persistentVolumeClaim":{"claimName":"jenkins"}}],"containers":[{"name":"jenkins","image":"registry.access.redhat.com/openshift3/jenkins-2-rhel7@sha256:9d9fd30f8cdf87c89b96e01e8b17786cd0643929b0621b719ab6b1353c8a5722","env":[{"name":"OPENSHIFT_ENABLE_OAUTH","value":"true"},{"name":"OPENSHIFT_ENABLE_REDIRECT_PROMPT","value":"true"},{"name":"KUBERNETES_MASTER","value":"https://kubernetes.default:443"},{"name":"KUBERNETES_TRUST_CERTIFICATES","value":"true"},{"name":"JENKINS_SERVICE_NAME","value":"jenkins"},{"name":"JNLP_SERVICE_NAME","value":"jenkins-jnlp"}],"resources":{"limits":{"memory":"512Mi"}},"volumeMounts":[{"name":"jenkins-data","mountPath":"/var/lib/jenkins"}],"livenessProbe":{"httpGet":{"path":"/login","port":8080,"scheme":"HTTP"},"initialDelaySeconds":420,"timeoutSeconds":240,"periodSeconds":360,"successThreshold":1,"failureThreshold":2},"readinessProbe":{"httpGet":{"path":"/login","port":8080,"scheme":"HTTP"},"initialDelaySeconds":3,"timeoutSeconds":240,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{},"privileged":false}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"jenkins","serviceAccount":"jenkins","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":0,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]}}}
    creationTimestamp: null
    generation: 1
    labels:
      app: jenkins-persistent
      openshift.io/deployment-config.name: jenkins
      template: jenkins-persistent-template
    name: jenkins-1
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: jenkins
      uid: 433c7df4-5d00-11e8-bf27-000d3a189887
  spec:
    replicas: 1
    selector:
      deployment: jenkins-1
      deploymentconfig: jenkins
      name: jenkins
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: jenkins
          openshift.io/deployment.name: jenkins-1
        creationTimestamp: null
        labels:
          deployment: jenkins-1
          deploymentconfig: jenkins
          name: jenkins
      spec:
        containers:
        - env:
          - name: OPENSHIFT_ENABLE_OAUTH
            value: "true"
          - name: OPENSHIFT_ENABLE_REDIRECT_PROMPT
            value: "true"
          - name: KUBERNETES_MASTER
            value: https://kubernetes.default:443
          - name: KUBERNETES_TRUST_CERTIFICATES
            value: "true"
          - name: JENKINS_SERVICE_NAME
            value: jenkins
          - name: JNLP_SERVICE_NAME
            value: jenkins-jnlp
          image: registry.access.redhat.com/openshift3/jenkins-2-rhel7@sha256:9d9fd30f8cdf87c89b96e01e8b17786cd0643929b0621b719ab6b1353c8a5722
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 2
            httpGet:
              path: /login
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 420
            periodSeconds: 360
            successThreshold: 1
            timeoutSeconds: 240
          name: jenkins
          readinessProbe:
            failureThreshold: 3
            httpGet:
              path: /login
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 3
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 240
          resources:
            limits:
              memory: 512Mi
          securityContext:
            capabilities: {}
            privileged: false
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /var/lib/jenkins
            name: jenkins-data
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: jenkins
        serviceAccountName: jenkins
        terminationGracePeriodSeconds: 30
        volumes:
        - name: jenkins-data
          persistentVolumeClaim:
            claimName: jenkins
  status:
    replicas: 0
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2018-05-10 16:51:57 +0000 UTC
      openshift.io/deployer-pod.created-at: 2018-05-10 16:51:52 +0000 UTC
      openshift.io/deployer-pod.name: routingservice-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: routingservice
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"v1","metadata":{"name":"routingservice","namespace":"iot-development","selfLink":"/apis/apps.openshift.io/v1/namespaces/iot-development/deploymentconfigs/routingservice","uid":"3de2f4c4-5471-11e8-a999-000d3a189887","resourceVersion":"19711","generation":2,"creationTimestamp":"2018-05-10T16:43:18Z","labels":{"app":"routingservice"},"annotations":{"openshift.io/generated-by":"OpenShiftWebConsole"}},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["routingservice"],"from":{"kind":"ImageStreamTag","namespace":"iot-development","name":"routingservice:latest"},"lastTriggeredImage":"172.30.1.1:5000/iot-development/routingservice@sha256:a0ad043afb73edf7ee7cd1801ddae7a202eac6a36e0ed0847ecd7d9d859097c5"}},{"type":"ConfigChange"}],"replicas":1,"test":false,"selector":{"deploymentconfig":"routingservice"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"routingservice","deploymentconfig":"routingservice"}},"spec":{"containers":[{"name":"routingservice","image":"172.30.1.1:5000/iot-development/routingservice@sha256:a0ad043afb73edf7ee7cd1801ddae7a202eac6a36e0ed0847ecd7d9d859097c5","ports":[{"containerPort":8778,"protocol":"TCP"}],"env":[{"name":"SOURCE_AMQ_BROKER","value":"tcp://broker-amq-mesh:61616"},{"name":"SOURCE_BROKER_ADMIN_UID","value":"admin"},{"name":"SOURCE_BROKER_ADMIN_PASSWD","value":"change12_me"},{"name":"BROKER_AMQ_MQTT_HOST","value":"broker-amq-mqtt"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2018-05-10T16:43:18Z","lastTransitionTime":"2018-05-10T16:43:18Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: null
    generation: 1
    labels:
      app: routingservice
      openshift.io/deployment-config.name: routingservice
    name: routingservice-1
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: routingservice
      uid: 3de2f4c4-5471-11e8-a999-000d3a189887
  spec:
    replicas: 1
    selector:
      deployment: routingservice-1
      deploymentconfig: routingservice
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: routingservice
          openshift.io/deployment.name: routingservice-1
        creationTimestamp: null
        labels:
          app: routingservice
          deployment: routingservice-1
          deploymentconfig: routingservice
      spec:
        containers:
        - env:
          - name: SOURCE_AMQ_BROKER
            value: tcp://broker-amq-mesh:61616
          - name: SOURCE_BROKER_ADMIN_UID
            value: admin
          - name: SOURCE_BROKER_ADMIN_PASSWD
            value: change12_me
          - name: BROKER_AMQ_MQTT_HOST
            value: broker-amq-mqtt
          image: 172.30.1.1:5000/iot-development/routingservice@sha256:a0ad043afb73edf7ee7cd1801ddae7a202eac6a36e0ed0847ecd7d9d859097c5
          imagePullPolicy: Always
          name: routingservice
          ports:
          - containerPort: 8778
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
  status:
    replicas: 0
- apiVersion: v1
  kind: ReplicationController
  metadata:
    annotations:
      openshift.io/deployer-pod.completed-at: 2018-05-10 16:51:50 +0000 UTC
      openshift.io/deployer-pod.created-at: 2018-05-10 16:51:10 +0000 UTC
      openshift.io/deployer-pod.name: software-sensor-1-deploy
      openshift.io/deployment-config.latest-version: "1"
      openshift.io/deployment-config.name: software-sensor
      openshift.io/deployment.phase: Complete
      openshift.io/deployment.replicas: "1"
      openshift.io/deployment.status-reason: config change
      openshift.io/encoded-deployment-config: |
        {"kind":"DeploymentConfig","apiVersion":"v1","metadata":{"name":"software-sensor","namespace":"iot-development","selfLink":"/apis/apps.openshift.io/v1/namespaces/iot-development/deploymentconfigs/software-sensor","uid":"3de31104-5471-11e8-a999-000d3a189887","resourceVersion":"19581","generation":2,"creationTimestamp":"2018-05-10T16:43:18Z","labels":{"app":"software-sensor"},"annotations":{"openshift.io/generated-by":"OpenShiftWebConsole"}},"spec":{"strategy":{"type":"Rolling","rollingParams":{"updatePeriodSeconds":1,"intervalSeconds":1,"timeoutSeconds":600,"maxUnavailable":"25%","maxSurge":"25%"},"resources":{},"activeDeadlineSeconds":21600},"triggers":[{"type":"ImageChange","imageChangeParams":{"automatic":true,"containerNames":["software-sensor"],"from":{"kind":"ImageStreamTag","namespace":"iot-development","name":"software-sensor:latest"},"lastTriggeredImage":"172.30.1.1:5000/iot-development/software-sensor@sha256:5cae52a43658e6a18d0e90a76e8c31f8fa63e95d542326b1d5838fa99aaa04a2"}},{"type":"ConfigChange"}],"replicas":1,"test":false,"selector":{"deploymentconfig":"software-sensor"},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"software-sensor","deploymentconfig":"software-sensor"}},"spec":{"containers":[{"name":"software-sensor","image":"172.30.1.1:5000/iot-development/software-sensor@sha256:5cae52a43658e6a18d0e90a76e8c31f8fa63e95d542326b1d5838fa99aaa04a2","ports":[{"containerPort":8080,"protocol":"TCP"},{"containerPort":8443,"protocol":"TCP"},{"containerPort":8778,"protocol":"TCP"}],"env":[{"name":"deviceType","value":"temperature"},{"name":"deviceID","value":"4711"},{"name":"initialValue","value":"70"},{"name":"count","value":"1000"},{"name":"waitTime","value":"1"},{"name":"receiverURL","value":"broker-amq-mqtt"},{"name":"brokerUID","value":"admin"},{"name":"brokerPassword","value":"change12_me"},{"name":"highWater","value":"800"},{"name":"lowWater","value":"200"},{"name":"JAVA_OPTIONS","value":"-DhighWater=800 -DlowWater=200 -DbrokerUID=admin -DbrokerPassword=change12_me -DreceiverURL=broker-amq-mqtt -DdeviceType=temperature -DdeviceID=4711 -DinitialValue=70 -Dcount=1000 -DwaitTime=1"},{"name":"JAVA_APP_JAR","value":"softwareSensor-jar-with-dependencies.jar"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"default-scheduler"}}},"status":{"latestVersion":1,"observedGeneration":1,"replicas":0,"updatedReplicas":0,"availableReplicas":0,"unavailableReplicas":0,"details":{"message":"config change","causes":[{"type":"ConfigChange"}]},"conditions":[{"type":"Available","status":"False","lastUpdateTime":"2018-05-10T16:43:18Z","lastTransitionTime":"2018-05-10T16:43:18Z","message":"Deployment config does not have minimum availability."}]}}
    creationTimestamp: null
    generation: 1
    labels:
      app: software-sensor
      openshift.io/deployment-config.name: software-sensor
    name: software-sensor-1
    ownerReferences:
    - apiVersion: apps.openshift.io/v1
      blockOwnerDeletion: true
      controller: true
      kind: DeploymentConfig
      name: software-sensor
      uid: 3de31104-5471-11e8-a999-000d3a189887
  spec:
    replicas: 1
    selector:
      deployment: software-sensor-1
      deploymentconfig: software-sensor
    template:
      metadata:
        annotations:
          openshift.io/deployment-config.latest-version: "1"
          openshift.io/deployment-config.name: software-sensor
          openshift.io/deployment.name: software-sensor-1
        creationTimestamp: null
        labels:
          app: software-sensor
          deployment: software-sensor-1
          deploymentconfig: software-sensor
      spec:
        containers:
        - env:
          - name: deviceType
            value: temperature
          - name: deviceID
            value: "4711"
          - name: initialValue
            value: "70"
          - name: count
            value: "1000"
          - name: waitTime
            value: "1"
          - name: receiverURL
            value: broker-amq-mqtt
          - name: brokerUID
            value: admin
          - name: brokerPassword
            value: change12_me
          - name: highWater
            value: "800"
          - name: lowWater
            value: "200"
          - name: JAVA_OPTIONS
            value: -DhighWater=800 -DlowWater=200 -DbrokerUID=admin -DbrokerPassword=change12_me
              -DreceiverURL=broker-amq-mqtt -DdeviceType=temperature -DdeviceID=4711
              -DinitialValue=70 -Dcount=1000 -DwaitTime=1
          - name: JAVA_APP_JAR
            value: softwareSensor-jar-with-dependencies.jar
          image: 172.30.1.1:5000/iot-development/software-sensor@sha256:5cae52a43658e6a18d0e90a76e8c31f8fa63e95d542326b1d5838fa99aaa04a2
          imagePullPolicy: Always
          name: software-sensor
          ports:
          - containerPort: 8080
            protocol: TCP
          - containerPort: 8443
            protocol: TCP
          - containerPort: 8778
            protocol: TCP
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
  status:
    replicas: 0
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      description: The broker's AMQP port.
    creationTimestamp: null
    labels:
      app: amq63-persistent
      application: broker
      template: amq63-persistent
      xpaas: 1.4.8
    name: broker-amq-amqp
  spec:
    ports:
    - port: 5672
      protocol: TCP
      targetPort: 5672
    selector:
      deploymentConfig: broker-amq
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      description: Supports node discovery for mesh formation.
      service.alpha.kubernetes.io/tolerate-unready-endpoints: "true"
    creationTimestamp: null
    labels:
      app: amq63-persistent
      application: broker
      template: amq63-persistent
      xpaas: 1.4.8
    name: broker-amq-mesh
  spec:
    clusterIP: None
    ports:
    - name: mesh
      port: 61616
      protocol: TCP
      targetPort: 61616
    selector:
      deploymentConfig: broker-amq
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      description: The broker's MQTT port.
    creationTimestamp: null
    labels:
      app: amq63-persistent
      application: broker
      template: amq63-persistent
      xpaas: 1.4.8
    name: broker-amq-mqtt
  spec:
    ports:
    - port: 1883
      protocol: TCP
      targetPort: 1883
    selector:
      deploymentConfig: broker-amq
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      description: The broker's STOMP port.
    creationTimestamp: null
    labels:
      app: amq63-persistent
      application: broker
      template: amq63-persistent
      xpaas: 1.4.8
    name: broker-amq-stomp
  spec:
    ports:
    - port: 61613
      protocol: TCP
      targetPort: 61613
    selector:
      deploymentConfig: broker-amq
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      description: The broker's OpenWire port.
      service.alpha.openshift.io/dependencies: '[{"name": "broker-amq-amqp", "kind":
        "Service"},{"name": "broker-amq-mqtt", "kind": "Service"},{"name": "broker-amq-stomp",
        "kind": "Service"}]'
    creationTimestamp: null
    labels:
      app: amq63-persistent
      application: broker
      template: amq63-persistent
      xpaas: 1.4.8
    name: broker-amq-tcp
  spec:
    ports:
    - port: 61616
      protocol: TCP
      targetPort: 61616
    selector:
      deploymentConfig: broker-amq
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      openshift.io/generated-by: OpenShiftWebConsole
    creationTimestamp: null
    labels:
      app: businessrules
    name: businessrules
  spec:
    ports:
    - name: 8080-tcp
      port: 8080
      protocol: TCP
      targetPort: 8080
    selector:
      deploymentconfig: businessrules
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      service.alpha.openshift.io/dependencies: '[{"name": "jenkins-jnlp", "namespace":
        "", "kind": "Service"}]'
      service.openshift.io/infrastructure: "true"
    creationTimestamp: null
    labels:
      app: jenkins-persistent
      template: jenkins-persistent-template
    name: jenkins
  spec:
    ports:
    - name: web
      port: 80
      protocol: TCP
      targetPort: 8080
    selector:
      name: jenkins
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    creationTimestamp: null
    labels:
      app: jenkins-persistent
      template: jenkins-persistent-template
    name: jenkins-jnlp
  spec:
    ports:
    - name: agent
      port: 50000
      protocol: TCP
      targetPort: 50000
    selector:
      name: jenkins
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      openshift.io/generated-by: OpenShiftWebConsole
    creationTimestamp: null
    labels:
      app: routingservice
    name: routingservice
  spec:
    ports:
    - name: 8778-tcp
      port: 8778
      protocol: TCP
      targetPort: 8778
    selector:
      deploymentconfig: routingservice
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      openshift.io/generated-by: OpenShiftWebConsole
    creationTimestamp: null
    labels:
      app: software-sensor
    name: software-sensor
  spec:
    ports:
    - name: 8080-tcp
      port: 8080
      protocol: TCP
      targetPort: 8080
    selector:
      deploymentconfig: software-sensor
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
